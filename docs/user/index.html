<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.69.0"><meta name=description content="Contents  Installing ibus-typing-booster Adding ibus-typing-booster to your desktop  When using the Gnome3 desktop When using older Gnome3 desktops like in Ubuntu 21.04 When using other desktops than Gnome3 When using the Unity desktop on Ubuntu 16.04   Setup  Basic setup for your language More advanced options  Enable suggestions by a key Use inline completion  Inline completion is hard to use on Wayland   Spellchecking Toggle input mode on/off (Direct Input Mode) Reopening preÃ«dits Disabling in terminals Autosettings Forcing an IBus keymap   Simulate the behaviour of ibus-m17n   Key and Mouse bindings  The â€œAltGrâ€ key Table of default key bindings Mouse bindings âš ï¸ Caveat: Key bindings can only work when there is input focus Customizing key bindings  Customizing key bindings using digits Key bindings for temporary emoji and word predictions Display Character or Selection Information     Multilingual input  Example using Hindi and English at the same time Example using Spanish and English at the same time   Compose support (About dead keys and the Compose key)  â€œDead keysâ€ The â€œComposeâ€ key Customizing compose sequences Special â€œComposeâ€ features in Typing Booster  Why Typing Booster has its own â€œComposeâ€ implementation Automatically add â€œmissingâ€ dead key sequences Fallbacks for â€œmissingâ€ keypad sequences How undefined sequences are handled Show possible completions of compose sequences  A peculiarity of Gnome3 and compose completions   Optional colour for the compose preÃ«dit     Unicode symbols and emoji predictions  Emoji input Emoji input fuzzy matching Emoji input using multiple keywords Looking up related emoji Multilingual emoji input  Emoji input using German and English Emoji input using Hindi and English Emoji input using Japanese Emoji input using Japanese or Chinese phonetics   Unicode symbol input Unicode code point input Quickly toggling emoji mode on and off Emoji picker Emoji fonts  Historic: Showing emoji in colour     The Gnome on-screen keyboard, enabling and using it Using NLTK to find related words Speech recognition   Installing ibus-typing-booster For most distributions, there are binary packages available already."><link rel=stylesheet href=css/normalize.css><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel=stylesheet type=text/css><link rel=stylesheet href=../../css/cayman.ea0e967413f3851071cc8ace3621bc4205fe8fa79b2abe3d7bf94ff2841f0d47.css><link rel=apple-touch-icon sizes=180x180 href=../../favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicons/favicon-16x16.png><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css integrity=sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js integrity=sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body);></script><title>ibus-typing-booster</title></head><body><section class=page-header><h1 class=project-name>ğŸš€ ibus-typing-booster</h1><h2 class=project-tagline>Faster typing by context sensitive completion.</h2><nav><a href=../../ class=btn>ğŸ’ Overview</a>
<a href=../../post/ class=btn>ğŸ“œ Blog posts</a>
<a href=../../docs/ class=btn>ğŸ“– Documentation</a>
<a href=../../downloads/ class=btn>ğŸ Downloads</a></nav></section><section class=main-content><h1>User Documentation ğŸ‘©</h1><h1 id=contents>Contents</h1><ul><li><a href=#installing-ibus-typing-booster>Installing ibus-typing-booster</a></li><li><a href=#adding-ibus-typing-booster-to-your-desktop>Adding ibus-typing-booster to your desktop</a><ul><li><a href=#when-using-the-gnome3-desktop>When using the Gnome3 desktop</a></li><li><a href=#gnome3-ubuntu-21>When using older Gnome3 desktops like in Ubuntu 21.04</a></li><li><a href=#when-using-other-desktops-than-gnome3>When using other desktops than Gnome3</a></li><li><a href=#ubuntu-unity-ubuntu-16>When using the Unity desktop on Ubuntu 16.04</a></li></ul></li><li><a href=#setup>Setup</a><ul><li><a href=#basic-setup-for-your-language>Basic setup for your language</a></li><li><a href=#more-advanced-options>More advanced options</a><ul><li><a href=#enable-suggestions-by-a-key>Enable suggestions by a key</a></li><li><a href=#use-inline-completion>Use inline completion</a><ul><li><a href=#inline-completion-is-hard-to-use-on-wayland>Inline completion is hard to use on Wayland</a></li></ul></li><li><a href=#spellchecking>Spellchecking</a></li><li><a href=#direct-input-mode>Toggle input mode on/off (Direct Input Mode)</a></li><li><a href=#reopening-preedits>Reopening preÃ«dits</a></li><li><a href=#disabling-in-terminals>Disabling in terminals</a></li><li><a href=#autosettings>Autosettings</a></li><li><a href=#forcing-an-ibus-keymap>Forcing an IBus keymap</a></li></ul></li><li><a href=#simulate-the-behaviour-of-ibus-m17n>Simulate the behaviour of ibus-m17n</a></li></ul></li><li><a href=#key-and-mouse-bindings>Key and Mouse bindings</a><ul><li><a href=#the-alt-gr-key>The â€œAltGrâ€ key</a></li><li><a href=#table-of-default-key-bindings>Table of default key bindings</a></li><li><a href=#mouse-bindings>Mouse bindings</a></li><li><a href=#key-bindings-only-when-input-focus>âš ï¸ Caveat: Key bindings can only work when there is input focus</a></li><li><a href=#customizing-key-bindings>Customizing key bindings</a><ul><li><a href=#customizing-key-bindings-using-digits>Customizing key bindings using digits</a></li><li><a href=#key-bindings-temporary-predictions>Key bindings for temporary emoji and word predictions</a></li><li><a href=#command-show-selection-info>Display Character or Selection Information</a></li></ul></li></ul></li><li><a href=#multilingual-input>Multilingual input</a><ul><li><a href=#example-hindi-english>Example using Hindi and English at the same time</a></li><li><a href=#example-spanish-english>Example using Spanish and English at the same time</a></li></ul></li><li><a href=#compose-support>Compose support (About dead keys and the Compose key)</a><ul><li><a href=#dead-keys>â€œDead keysâ€</a></li><li><a href=#the-compose-key>The â€œComposeâ€ key</a></li><li><a href=#customizing-compose-sequences>Customizing compose sequences</a></li><li><a href=#special-compose-features-in-typing-booster>Special â€œComposeâ€ features in Typing Booster</a><ul><li><a href=#why-own-compose-implementation>Why Typing Booster has its own â€œComposeâ€ implementation</a></li><li><a href=#automatic-dead-key-sequences>Automatically add â€œmissingâ€ dead key sequences</a></li><li><a href=#fallbacks-for-missing-dead-key-sequences>Fallbacks for â€œmissingâ€ keypad sequences</a></li><li><a href=#handling-of-undefined-sequences>How undefined sequences are handled</a></li><li><a href=#show-compose-completions>Show possible completions of compose sequences</a><ul><li><a href=#a-peculiarity-of-gnome3-and-compose-completions>A peculiarity of Gnome3 and compose completions</a></li></ul></li><li><a href=#optional-colour-for-compose-preedit>Optional colour for the compose preÃ«dit</a></li></ul></li></ul></li><li><a href=#unicode-symbols-and-emoji-predictions>Unicode symbols and emoji predictions</a><ul><li><a href=#emoji-input>Emoji input</a></li><li><a href=#emoji-input-fuzzy-matching>Emoji input fuzzy matching</a></li><li><a href=#emoji-input-multiple-keywords>Emoji input using multiple keywords</a></li><li><a href=#lookup-related-emoji>Looking up related emoji</a></li><li><a href=#multilingual-emoji-input>Multilingual emoji input</a><ul><li><a href=#emoji-input-german-english>Emoji input using German and English</a></li><li><a href=#emoji-input-hindi-english>Emoji input using Hindi and English</a></li><li><a href=#emoji-input-japanese>Emoji input using Japanese</a></li><li><a href=#emoji-input-japanese-chinese-phonetics>Emoji input using Japanese or Chinese phonetics</a></li></ul></li><li><a href=#unicode-symbol-input>Unicode symbol input</a></li><li><a href=#unicode-code-point-input>Unicode code point input</a></li><li><a href=#quickly-toggling-emoji-mode>Quickly toggling emoji mode on and off</a></li><li><a href=#emoji-picker>Emoji picker</a></li><li><a href=#emoji-fonts>Emoji fonts</a><ul><li><a href=#historic-emoji-colour><span style=color:red>Historic:</span> Showing emoji in colour</a></li></ul></li></ul></li><li><a href=#gnome-osk>The Gnome on-screen keyboard, enabling and using it</a></li><li><a href=#nltk-related-words>Using NLTK to find related words</a></li><li><a href=#speech-recognition>Speech recognition</a></li></ul><hr><h1 id=installing-ibus-typing-booster>Installing ibus-typing-booster</h1><p>For most distributions, there are binary packages available
already. Here are some examples for common distributions how you can
install ibus-typing-booster (and optionally emoji-picker) using
package managers on the command line:</p><ul><li>Fedora:<ul><li><code>sudo dnf install ibus-typing-booster</code></li><li><code>sudo dnf install emoji-picker</code> (optional)</li></ul></li><li>Debian, Ubuntu:<ul><li><code>sudo apt-get install ibus-typing-booster</code> (includes emoji-picker already! ğŸ˜)</li></ul></li><li>openSUSE:<ul><li><code>sudo zypper install ibus-typing-booster</code> (includes emoji-picker already! ğŸ˜)</li></ul></li></ul><p>If your distribution has no binary packages, or you want the bleeding
edge version and prefer to install from source, please refer to the
<a href=../../docs/dev/>Developer Documentation</a>. There, you can also find
information on how to report bugs or translate the user interface into
your language.</p><p>Some distributions also have graphical tools to install software
(â€œGnome Softwareâ€, â€œUbuntu Softwareâ€, &mldr;). The following video
demonstrates how to install ibus-typing-booster and emoji-picker on
Ubuntu 21.04 using â€œUbuntu Softwareâ€. While â€œUbuntu Softwareâ€ lists
ibus-typing-booster and emoji-picker as separate entries, installing
ibus-typing-booster also installs emoji-picker. â€œUbuntu Softwareâ€ may
not recognize this, still allowing you to click â€œInstallâ€ for
emoji-picker, but since itâ€™s already present, the installation
completes immediately ğŸ˜€.</p><p><strong>Note</strong>: when using Gnome, remember to log out of your desktop and
log in again after installation! On most desktops (including newer
Gnome desktops) one can avoid this by calling <code>ibus restart</code> from the
command line, but on older Gnome desktops, a full logout and login are
necessary; otherwise, ibus-typing-booster will not appear when you try
to <a href=#adding-ibus-typing-booster-to-your-desktop>add it in the desktop
settings</a>.</p><video playsinline aria-label="Installing using â€œUbuntu Softwareâ€ on Ubuntu 21.04" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/installing-using-ubuntu-software-on-ubuntu-21.04.mp4 type=video/mp4><p>Your browser does not support video.</p></video><h1 id=adding-ibus-typing-booster-to-your-desktop>Adding ibus-typing-booster to your desktop</h1><p>This section assumes that you have already installed ibus-typing-booster either using binary packages or from source and now want to add an ibus-typing-booster input method to your desktop.</p><p>The procedure to add an ibus-typing-booster input method differs slightly depending on which type of desktop you use, the following sections show the procedure for popular desktop choices.</p><h2 id=when-using-the-gnome3-desktop>When using the Gnome3 desktop</h2><video playsinline aria-label="Adding ibus-typing-booster to the Gnome3 desktop" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/When-using-the-Gnome3-desktop.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This video shows how to add ibus-typing-booster to recent Gnome3
desktops, using Gnome3 on Fedora 34 in this example. In older versions
of Gnome3, the input method setup was in the â€œRegion & Languageâ€
settings instead of in the â€œKeyboardâ€ settings, for example <a href=#gnome3-ubuntu-21>Ubuntu
21.04 has such an older version of Gnome</a>.</p><ol><li><p>First click on the panel menu in the top right corner of the desktop and then click on the â€œscrewdriver and wrenchâ€ icon to open the Gnome3 control center.</p></li><li><p>Now the Gnome3 control center has opened. Click on the icon for the â€œKeyboardâ€ settings.</p></li><li><p>At the bottom you see a list of input sources which have already been added to the desktop before. In this case there are already: â€œEnglish (US, with euro on 5)â€ and â€œJapanese (Kana Kanji)â€. This is just an example of course, the list of already added input methods could look different for you. The first entry, â€œEnglish (US, with euro on 5)â€, is not really an input engine, it is just a keyboard layout. One can see that an entry in the list of input sources is a keyboard layout if it does not have the icon showing two tooth-wheels at the right side.</p><p>It is recommended to use a keyboard layout with ibus-typing-booster which has a real â€œAltGrâ€ key and does not just make the â€œAltGrâ€ or â€œAltâ€ key on the right side of the space bar basically a duplicate of the left â€œAltâ€ key. For details, see The <a href=#the-alt-gr-key>â€œAltGrâ€ key</a>.</p><p>The second entry, â€œJapanese (Kana Kanji)â€ is not just a keyboard layout, it is an input engine to type Japanese.</p><p>Now click on the â€œ+â€ button at the lower left to add another input source.</p></li><li><p>Then click on the three vertical dots â€œâ‹®â€ to open the search entry field.</p></li><li><p>Type the word â€œboosterâ€ into the search entry field. Only â€œOtherâ€ remains. ibus-typing-booster supports many languages, even at the same time. Therefore it is not listed under any specific language but under â€œOtherâ€.</p></li><li><p>Click on â€œOtherâ€ and you should find an input method named â€œOther (Typing Booster)â€ there. There maybe lots of other input methods shown there, depending on what is installed on your system, but if you have ibus-typing-booster installed, â€œOther (Typing Booster)â€ should show up there.</p><p>Select â€œOther (Typing Booster)â€ and click the â€œAddâ€ button at the top right.</p><p>(<strong>Note:</strong> If you just installed ibus-typing-booster while your current gnome session was still running, you will not find ibus-typing-booster yet. In that case you need to restart your gnome session in order to make newly installed input methods appear in the gnome setup.)</p></li><li><p>Now you you see the ibus-typing-booster engine listed in the â€œKeyboardâ€ dialogue of Gnome3.</p><p>At the right side of the entry â€œOther (Typing Booster)â€ there are three vertical dots â€œâ‹®â€. If you click on these, a menu opens. One of the entries in that menu is â€œPreferencesâ€. Clicking that opens the setup tool of the ibus-typing-booster engine.</p></li><li><p>Now open some programs where you could type something, for example â€œgeditâ€ or â€œgnome-terminalâ€. And activate the ibus-typing-booster engine you want to use in the input source menu of the Gnome panel as shown in this screenshot.</p><p>When the input source menu of the Gnome panel is open and an ibus-typing-booster engine is selected, there is a menu entry â€œSetupâ€ which is an quicker way to open the setup tool than going to the â€œRegion & Languageâ€ settings dialogue.</p><p>Some options are also directly available in the input source menu of the gnome panel to have quicker access to these often used options than having to open the setup tool. There are also <a href=#key-and-mouse-bindings>key and mouse bindings</a> for these frequently used options which are shown in the input source menu of the gnome panel as well as a reminder.</p></li><li><p>Now type something, for example into gedit and you should see some suggestions for completions.</p><p>At the beginning, the suggestions only come from the hunspell dictionaries and are thus not very good yet. But ibus-typing-booster learns from your typing, it remembers which words you use often in which context. Therefore, the suggestions become much better over time.</p><p>To switch between ibus-typing-booster and other input methods or a simple keyboard layout, you can use the input sources menu in the Gnome panel or the keyboard shortcut, which is Super+Space by default (can be changed in the gnome-control-center).</p></li></ol><h2 id=gnome3-ubuntu-21>When using older Gnome3 desktops like in Ubuntu 21.04</h2><video playsinline aria-label="Adding ibus-typing-booster to older Gnome3 desktops like in Ubuntu 21.04" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/When-using-Ubuntu-21.04.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This video shows how to add ibus-typing-booster to older Gnome3 desktops
like for example in Ubuntu 21.04 where the input method setup was still
in the â€œRegion & Languageâ€ settings instead of in the â€œKeyboardâ€ settings.
For adding ibus-typing-booster in newer versions of Gnome look <a href=#when-using-the-gnome3-desktop>here</a>.</p><h2 id=when-using-other-desktops-than-gnome3>When using other desktops than Gnome3</h2><video playsinline aria-label="When using other desktops than Gnome3" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/When-using-other-desktops-than-Gnome3.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This chapter shows how to add the ibus-typing-booster input method on most desktops except Gnome3 and Unity. The screenshots in this chapter are using XFCE on Fedora 34, but it is the same procedure on most other desktops and window managers as well, only Gnome3 and Unity are a bit special.</p><ol><li><p>First start the <code>ibus-setup</code> program (For example by typing <code>ibus-setup &</code> into a terminal.</p></li><li><p>If <code>ibus-daemon</code> is not yet running, <code>ibus-setup</code> may ask whether you want to start it. In that case click on â€œYesâ€.</p></li><li><p>If <code>ibus-daemon</code> was not already running, you probably also want to make it run automatically every time when you log into your desktop. If you are using Fedora you can do that for most desktops and window managers using <code>imsettings-switch</code> like this:
<code>imsettings-switch ibus</code>. Or use the graphical tool <code>im-chooser</code> and select to use Ibus.</p></li><li><p>This will change some settings so that when you log in next time, <code>ibus-daemon</code> will be running and the following environment variables will be set:</p><p><code>export QT_IM_MODULE=ibus</code></p><p><code>export XMODIFIERS=@im=ibus</code></p><p><code>export GTK_IM_MODULE=ibus</code></p></li><li><p>If you donâ€™t use Fedora and do not have the <code>imsettings-switch</code>, there may be some other way to start <code>ibus-daemon</code> on your system automatically and to set the above environment variables.</p><p>Or you can put the above environment variables into your <code>~/.bashrc</code> file and start <code>ibus-daemon</code> from some X11 startup file or make your windowmanager start it. I am using the â€œi3â€ windowmanager at the moment and have added the line <code>exec ibus-daemon -drx</code> to my <code>~/.config/i3/config</code> file.</p></li><li><p>In the â€œGeneralâ€ tab of <code>ibus-setup</code> you see that the default shortcut key to switch between input methods is â€œSuper+Spaceâ€ and you can change this and some other options if you like.</p><p>Personally I like the extra property panel. Therefore, I set the â€œShow property panelâ€ option to â€œAlwaysâ€ here.</p><p>You probably also want the option â€œShow icon on system trayâ€ switched on.</p><p>And I usually choose a somewhat bigger font to be able to see the details in the emoji better.</p></li><li><p>Now use the â€œInput Methodâ€ tab of <code>ibus-setup</code> to add the ibus-typing-booster engine.</p><p>You see a list of input sources which have already been added to the desktop before. In this case there are already: â€œEnglish - English (US, euro on 5)â€ and â€œJapanese - Anthyâ€. This is just an example of course, the list of already added input methods could look different for you. The first entry, â€œEnglish - English (US, euro on 5)â€, is not really an input engine, it is just a keyboard layout.</p><p>It is recommended to use a keyboard layout with ibus-typing-booster which has a real â€œAltGrâ€ key and does not just make the â€œAltGrâ€ or â€œAltâ€ key on the right side of the space bar basically a duplicate of the left â€œAltâ€ key. For details, see The <a href=#the-alt-gr-key>â€œAltGrâ€ key</a>. By the way, in the â€œAdvancedâ€ tab of <code>ibus-setup</code> there is an option â€œUse system keyboard layoutâ€, if this option is selected, ibus-typing-booster will always use the system keyboard layout, otherwise it will use the keyboard layout from the list of input methods which was used last before switching to ibus-typing-booster.</p><p>The second entry which is already there in the list of input methods, â€œJapanese (Kana Kanji)â€, is a real input engine, not a keyboard layout.</p><p>Now click on the â€œAddâ€ button at top right to add another input source.</p></li><li><p>Click on the three vertical dots â€œâ‹®â€ at the bottom to get the full list of languages. ibus-typing-booster supports many languages, even at the same time. Therefore it is not listed under any specific language but in the â€œOtherâ€ at the very bottom of the list. You could either scroll down to the â€œOtherâ€ section, click on it and then scroll again looking for â€œğŸš€ Typing Boosterâ€, or you could use the search entry and search for â€œboosterâ€ for example.</p></li><li><p>When you find â€œğŸš€ Typing Boosterâ€, select it and click the â€œAddâ€ button.</p></li><li><p>Now the ibus-typing-booster engine has been added to the list of input methods configured in <code>ibus-setup</code>. If you select that â€œğŸš€ Typing Boosterâ€ in the list of configured input methods in <code>ibus-setup</code>, you can click the â€œPreferencesâ€ button to open the setup tool of the typing-booster engine. There you can customize ibus-typing-booster according to your preferences (You can also open the ibus-typing-booster setup tool later from the menu in the desktop panel).</p></li><li><p>Now open some programs where you could type something, for example â€œgeditâ€ or â€œgnome-terminalâ€. And activate the ibus-typing-booster engine by clicking on the icon for the input methods in the system tray and selecting â€œTyping boosterâ€ there.</p></li><li><p>When the input method menu of system tray icon is open and â€œTyping boosterâ€ is selected, there is a menu entry â€œSetupâ€ which is a quicker way to open the setup tool of â€œTyping Boosterâ€ then starting <code>ibus-setup</code> again. Some options are also directly available in the input method menu of the system tray icon to have quicker access to these often used options.</p></li><li><p>Near the top right in this video you see the â€œproperty panelâ€ which shows the current status of some frequently used options which can also be changed by clicking on the â€œproperty panelâ€. The â€œproperty panelâ€ also offers a button to open the setup tool of the ibus-typing-booster engine. You can move that â€œproperty panelâ€ to around on your desktop to a convenient place.</p></li><li><p>Now type something, for example into gedit and you should see some suggestions for completions.</p><p>At the beginning, the suggestions only come from the hunspell dictionaries and are thus not very good yet. But ibus-typing-booster learns from your typing, it remembers which words you use often in which context. Therefore, the suggestions become much better over time.</p><p>To switch between ibus-typing-booster and other input methods or a simple keyboard layout, you can use the input methods menu you get by clicking on the system tray icon or you can use the keyboard shortcut, which is Super+Space by default (can be changed using <code>ibus-setup</code>).</p></li></ol><h2 id=ubuntu-unity-ubuntu-16>When using the Unity desktop on Ubuntu 16.04</h2><figure><img src=../../images/user-docs/When-using-the-Unity-desktop-on-Ubuntu.gif alt="Setup of Typing Booster on the Unity desktop of Ubuntu 16.04"><figcaption><p>Setup of Typing Booster on the Unity desktop of Ubuntu 16.04</p></figcaption></figure><p>This section shows the setup of ibus-typing-booster on the â€œUnityâ€ desktop of ubuntu-16.04.</p><p><span style=color:red>The information in this chapter is pretty old, maybe I should delete it soon. Current Ubuntu doesnâ€™t use â€œUnityâ€ anymore. It uses Gnome3 and behaves quite similar to Gnome3 on other distributions. But the â€œUnityâ€ desktop was quite a bit different.</span></p><p>These instructions are for ibus-typing-booster 1.5.x. For ibus-typing-booster >= 2.0.0, all engines have been merged into one, so you wonâ€™t find many different â€œTyping Boosterâ€ engines for many different languages anymore, there is only one single â€œTyping Boosterâ€ engine now which supports all languages. That doesnâ€™t make a big difference in these instructions though, so I hope it is not too confusing that the screenshots in this sections are not up-to-date with ibus-typing-booster >= 2.0.0.</p><ol><li><p>Open the system settings by clicking on the icon showing a tooth-wheel and a wrench a the left side of the screen. Then click on the â€œLanguage Supportâ€ icon there. In the dialog which opens, make sure that â€œKeyboard input method systemâ€ is set to â€œIBusâ€.</p><p>Close that â€œLanguage Supportâ€ dialogue again and click on the â€œText Entryâ€ icon in the system settings.</p></li><li><p>Some input sources may be already be listed at the left side of this dialogue. In this example we see â€œEnglish (US, with euro on 5)â€ which is not really an input engine, it is just a keyboard layout.</p><p>It is recommended to use a keyboard layout with ibus-typing-booster which has a real â€œAltGrâ€ key and does not just make the â€œAltGrâ€ or â€œAltâ€ key on the right side of the space bar basically a duplicate of the left â€œAltâ€ key. For details, see <a href=#the-alt-gr-key>The â€œAltGrâ€ key</a>.</p><p>Now click on the â€œ+â€ button at the lower left to add another input source.</p></li><li><p>Type the word â€œboosterâ€ into the search entry and you see the currently available language variants of ibus-typing-booster. Select the variant of ibus-typing-booster you want to use and click on â€œAddâ€.</p></li><li><p>Now you see that an ibus-typing-booster engine has been added to the list of input sources to use.</p><p>If you select it, a n icon showing a wrench and a screwdriver appears at the bottom right of the list, to the left of the icon showing a keyboard. Click the â€œwrench and screwdriverâ€ icon to open the setup tool of ibus-typing-booster.</p></li><li><p>Here you see the setup tool of that ibus-typing-booster engine where you can customize ibus-typing-booster according to your preferences.</p></li><li><p>Now open some programs where you could type something, for example â€œgeditâ€ or â€œgnome-terminalâ€. And activate the ibus-typing-booster engine you want to use in the input source menu of the panel as shown in this screenshot.</p><p>When the input source menu of the panel is open and an ibus-typing-booster engine is selected, there is a menu entry â€œSetupâ€ which is an quicker way to open the setup tool ibus-typing-booster setup tool than going via the system settings.</p><p>Some options of ibus-typing-booster are also directly available in the input source menu of the panel to have quicker access to these often used options than having to open the setup tool. For example the option to switch emoji mode on or off is available in the panel menu. There are also <a href=#key-and-mouse-bindings>key and mouse bindings</a> for these frequently used options which are shown in the input source menu of the panel as well as a reminder.</p></li><li><p>Now type something, for example into gedit and you should see some suggestions for completions.</p><p>At the beginning, the suggestions only come from the hunspell dictionaries and are thus not very good yet. But ibus-typing-booster learns from your typing, it remembers which words you use often in which context. Therefore, the suggestions become much better over time.</p><p>To switch between ibus-typing-booster and other input methods or a simple keyboard layout, you can use the input sources menu in the panel or the keyboard shortcut, which is Super+Space by default (can be changed in the â€œText Entryâ€ dialogue of the system settings).</p></li><li><p>If you want to enable the ibus property panel or change the font size for the list of candidates, you can do that by starting the ibus-setup program.</p><p>To show the property panel set â€œShow property panelâ€ to â€œAlwaysâ€ in ibus-setup.</p><p>The property panel is seen in this screenshot at the top right, just below the Unity panel. You can move the property panel anywhere you like by dragging its left edge. The property panel shows the current value of some options of ibus-typing-booster and allows to change them quickly.</p><p>The screenshot also shows how a much bigger font was chosen for the candidate list with the â€œUse custom fontâ€ option in ibus-setup.</p></li></ol><h1 id=setup>Setup</h1><p>Ibus-typing-booster has a setup tool which allows you to adapt the behaviour a lot to your preferences.</p><h2 id=basic-setup-for-your-language>Basic setup for your language</h2><video playsinline aria-label="Default settings in Hindi locale" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/hindi-locale-default-settings.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This video shows how to set up languages and input methods in Typing Booster.</p><p>The most important setup in Typing booster is to choose <strong>which</strong>
languages you want to use and <strong>how</strong> to input them.</p><p>ibus-typing-booster works for many languages and it may be necessary
to change the default dictionaries and input methods to different
ones.</p><p>When ibus-typing-booster is started for the very first time, it checks
which locale is set in the environment and initializes its setup with
dictionaries and input methods which are useful for this locale.</p><p>However, it is probably a good idea to open the setup tool and look whether
these defaults are okay for you. You can open the setup tool by
selecting ibus-typing-booster in the input method menu of the panel
and then clicking on the â€œSetupâ€ menu item.</p><p>At the beginning, this video shows the default dictionaries and input
methods for the locale â€œhi_IN.UTF-8â€ (Hindi in India).</p><p>For this locale, one will get the dictionaries â€œhi_INâ€ (Hindi) and
en_GB (British English) and the input methods â€œhi-inscript2â€ and
â€œNoIMEâ€ by default. â€œhi-inscript2â€ is an input method for
Hindi. â€œNoIMEâ€ means no input method at all, that means the characters
are used as they come from the current keyboard layout without any
transliteration. Having the British English dictionary and the â€œNoIMEâ€
input method there as well also makes it possible to type English.</p><p>As English is used quite a lot in India, it is probably a good default
for the â€œhi_IN.UTF-8â€ locale to set up input for both Hindi and British
English.</p><p>But the defaults guessed from the current locale are not always what a
user wants. A user might use a â€œen_US.UTF-8â€ (American English) locale
because they prefer the user interface in English but nevertheless
might want to type Hindi. And even when running in the â€œhi_IN.UTF-8â€
locale, the defaults might not be optimal for some
users. â€œhi-inscript2â€ is not the only input method to type Hindi,
there are other choices. And maybe a Hindi user wants to use
additional other languages and input methods completely unrelated to
the current locale.</p><p>So the video shows how to add or remove dictionaries and input methods
and move them up or down to change their priority.
The video also shows how the â€œInput Method Helpâ€ button pops up
an explanation what an input method does and how to use it.</p><p>Near the end, the video shows how the â€œSet to defaultâ€ buttons can
reset the lists of languages and input methods to the defaults
for the current locale.</p><p>Both lists can hold a maximum of 10 items, you can have up to 10
dictionaries and 10 input methods. Donâ€™t overdo it though, donâ€™t add
more than you really need, adding more dictionaries and input methods
than one really needs slows down the system and reduces the accuracy
of the word predictions.</p><p>The list of input methods cannot be made completely empty, as soon as
you remove the last input method, the â€œNoIMEâ€ input method is
automatically added back because no input at all makes no sense.</p><p>The list of dictionaries can be made empty though. That doesnâ€™t seem
particularly useful to me, but apparently there are some users who use
ibus-typing-booster mostly as a convenient input method for emoji or
special symbols and in that case you donâ€™t need a dictionary.</p><h2 id=more-advanced-options>More advanced options</h2><p>This chapter explains more advanced options for adapting the behaviour
and look and feel of ibus-typing-booster to your preferences.</p><h3 id=enable-suggestions-by-a-key>Enable suggestions by a key</h3><video playsinline aria-label="Enable suggestions by key" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/enable-suggestions-by-key.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This video shows what the options â€œâ˜‘ï¸ Enable suggestions by keyâ€ and
â€œâ˜‘ï¸ Use preedit style only if lookup is enabledâ€ do.</p><p>By default, ibus-typing-booster pops up a list of candidates as soon
as you type something and you can choose a candidate to complete the
word you have started typing to save some key strokes, fix a spelling
error, or select an emoji or special character.</p><p>But some users prefer <strong>not</strong> to have these candidate lists displayed all
the time. Maybe they are fast touch typists and usually type without
completion support and the frequent pop up of the candidate lists is
too visually disturbing. Calculating the candidate lists also takes
some time, especially if emoji predictions are enabled. These
calculations may actually interfere with the typing for very fast
typists.</p><p>But from time to time even exceptionally fast typists may still want
to see candidates to complete a very long word or check the spelling
or or input an emoji.</p><p>In that case it can be useful to check the option â€œâ˜‘ï¸ Enable suggestions
by keyâ€.</p><p>If that option is enabled, no candidate list is shown unless a special
key is pressed to request a candidate list. By default that special
key is Tab but this can be changed by the <a href=#customizing-key-bindings>customizing the keys</a>
bound to the command â€œenable_lookupâ€.</p><p>In the beginning of the video, this option is <strong>not</strong> enabled. When typing
into the text editor one sees that after each single key typed a suggestion
list with word completions pops up.</p><p>Then the option â€œâ˜‘ï¸ Enable suggestions by keyâ€ is enabled. Now when
typing into the text editor, no suggestions pop up unless Tab is pressed.
So one sees that â€œHello Worlâ€ is typed without andy suggestions popping up,
then Tab is pressed and suggestions containing â€œWorldâ€ pop up.</p><p>There is another option â€œMinimum number of chars for completionâ€ which
is 1 by default. If that option is set to a number greater than 1,
then a candidate list appears automatically only when that number of
characters has been typed into the preedit. But using the keys bound
to the â€œenable_lookupâ€ command one can still request a candidate list
even if fewer characters have been typed.</p><p>Some users using this option to show candidate lists only on request,
request candidate lists only very rarely to complete an unusually long
and complicated word or to type an emoji. When candidate lists are
requested only very infrequently, some users dislike that the preedit,
i.e. the currently typed word, is always underlined. It is possible to
disable the underlining of the preedit in the â€œAppearanceâ€ tab of the
setup tool: There is a combobox where one can choose no underlining
for the preedit.</p><p>But one does not have to disable the underlining of the preedit
completely: It is even possible to hide the underline indicating the
preedit only as long as no candidate list is requested. To do this,
there is the option â€œUse preedit style only if lookup is enabledâ€ in
the Appearances tab of the setup tool. Then the preedit looks like
normal text until a candidate list is requested. As soon as the
candidate list is requested, the preedit is again styled (usually
underlined), this makes it clearer which part of the text has been
used to calculate that candidate list. The use of this option
is also shown near the end of the video.</p><p>âš ï¸ <strong>Attention when using Wayland</strong>: Currently it is not possible to do any
style changes to the preedit on Wayland. On Wayland the preedit is
always underlined and always has the same foreground and background
colour as normal text, no matter what options to influence the preedit
style are chosen in the setup tool of ibus-typing-booster. That is a
missing feature in Wayland.</p><h2 id=use-inline-completion>Use inline completion</h2><video playsinline aria-label="â€œNormalâ€ completion versus inline completion" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/inline-completion.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>The video above shows how â€œinline completionâ€ looks like compared to
â€œnormalâ€ completion.</p><p>Very often, the first candidate shown as a suggestion is already the
desired one, especially after having used ibus-typing-booster for a
while and it has learned what the user types often in what context.</p><p>When one ends up selecting the first candidate most of the time,
popping up a candidate list with more candidates all the time is
needlessly visually distracting.</p><p>When the option â€œUse inline completionâ€ is checked, the first and most
likely candidate is shown inline at the writing position without
popping up a candidate list. The characters one has already typed are
shown in the current foreground colour (black in the screenshot) and
are underlined (Unless underlining the preedit has been switched off
in the â€œApperanceâ€ settings). The completion which is suggested is
shown without the underline and in a different colour. This colour is
gray by default because this works in most cases, it also works when
the foreground text colour is white and the background black. The
colour to be used for the inline completion can be chosen in the
â€œAppearanceâ€ tab. One can also choose not to use a different colour,
then the only difference in style between the completion and the
already typed characters is the missing underline under the
completion.</p><p>This inline completion style looks much nicer than always popping up a
candidate list when the predictions are fairly good and the first
candidate is often the desired one.</p><p>If that first candidate shown inline is what one wants, one can select
it by typing any of the keys bound to the â€œselect_next_candidateâ€
command (Tab and arrow down by default).</p><p>When the candidate is selected, the style of the completion becomes
the same as the style of the already typed characters and the cursor
moves to the end of the completion.</p><p>Now one could commit it for example by typing space and continue
typing the next word of the text.</p><p>Or, if that candidate displayed inline happens to be not the desired
one, it is still possible to pop up a full candidate list with more
candidates by pressing the key bound to the â€œselect_next_candidateâ€
command (Tab by default) again. And then walk down the candidate list
by continue pressing that key. If nothing appropriate can be found in
the whole candiate list, one can use the key bound to the command
â€œcancelâ€ (the Escape key by default) to deselect all candidates and
close the candidate list. Then one could type more input characters
and hope that better suggestions become available after typing a bit
more.</p><p>One can also ignore the candidate displayed inline completely and just
continue typing more input characters until a better candidate is
displayed.</p><h4 id=inline-completion-is-hard-to-use-on-wayland>Inline completion is hard to use on Wayland</h4><video playsinline aria-label="Inline completion is hard to use on Wayland" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/inline-completion-wayland.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>âš ï¸ <strong>Attention when using Wayland</strong>: Currently it is not possible to do any
style changes to the preedit on Wayland. On Wayland the preedit is
always underlined and always has the same foreground and background
colour as normal text, no matter what options to influence the preedit
style are chosen in the setup tool of ibus-typing-booster. That is a
missing feature in Wayland.</p><p>This makes the â€œUse inline completionâ€ option quite hard to use on
Wayland. It is possible to use it, but as the characters typed and the
suggested completion are displayed in exactly the same style, it is
quite hard to see what has been typed and what is the completion. If
one looks carefully, one can still see it because the cursor can be
seen at the end of the typed characters, everything to the right of
the cursor is the suggested completion. If the completion is selected
by typing the key bound to the â€œselect_next_candidateâ€ command (Tab by
default), then the cursor moves to the end of the completion.</p><p>One can get used to the fact that the difference between the typed
text and the inline completion is hard to see on Wayland, but I found
this to be quite hard.</p><h3 id=spellchecking>Spellchecking</h3><video playsinline aria-label="Spellchecking in the preedit and candidate list" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/spellchecking-preedit-and-candidate-list.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>ibus-typing-booster also does spellchecking (Using hunspell for most
languages and voikko for Finnish).</p><p>If a word is typed which might contain a spelling error, the candidate
list of suggestions may contain suggestions for spelling corrections,
i.e. words which are not just completing the text already typed to
something longer or fixing some accents but â€œseriouslyâ€ changing the
characters already typed, more than just fixing accents,
i.e. completely different characters or another order of characters.</p><p>Optionally, such spellchecking suggestions can be marked in the
candidate list with a symbol or using a different colour in the
candidate list. The symbol and color can be chosen.</p><p>One can also choose to mark candidates which are (accent insensitive)
completions of the typed word with a symbol and/or colour if they are
valid words in one of the dictionaries.</p><p>And one can choose to mark candidates which are (accent insensitive)
completions of the typed word with a symbol and/or colour if they have
been remembered in the user database because the user has typed them
before.</p><p>All of these markings can help to get the spelling right, for example
if one uses a French dictionary and types â€œegaliâ€ and sees â€œÃ©galitÃ©â€
and â€œÃ©galisationâ€ marked as â€œdictionary suggestionsâ€ in the candidate
list, then one knows that these candidates are valid words in the
French dictionary and what one typed was identical to the beginning of
these candidates except for differents in accents.</p><p>It can also speed up typing not bothering typing the accents at all
(because this often requires extra key strokes) and then select the
correctly accented word from one of the â€œdictionary suggestionsâ€.</p><p>Colour in the candidate list does not work when using Gnome, only on
other desktops colour can be used in the candidate list. Marking
spellchecking suggestions with a symbol also works on Gnome. By
default, neither colour nor symbols are used for suggestions.</p><h4 id=indicating-spelling-errors-in-the-preedit>Indicating spelling errors in the preedit</h4><p>One can choose that the preedit changes colour when the typed word is
not a valid word in any of the dictionaries setup in the â€Dictionaries
and input methodsâ€ tab of the setup tool.</p><p>For example, if one uses an English and a French dictionary, and the
typed word in the preedit is neither a valid word in English nor in
French, then the preedit changes colour. This is also shown in the
above screenshot using the default colour red.</p><p>Dictionaries where spellchecking is not supported are ignored for this
colour change. For example, if one uses an English, a French, and a
Japanese dictionary at the same time, the preedit still changes colour
if the word is neither a valid English nor a valid French
word. Whether the typed word is in the Japanese dictionary or not
doesnâ€™t matter because the Japanese dictionary does not support
spellchecking.</p><p>âš ï¸ <strong>Attention when using Wayland</strong>: On Wayland it is not possible to
indicate a possible spelling error in the preedit.</p><p>Currently it is not possible to do any style changes to the preedit on
Wayland. On Wayland the preedit is always underlined and always has
the same foreground and background colour as normal text, no matter
what options to influence the preedit style are chosen in the setup
tool of ibus-typing-booster. That is a missing feature in Wayland.</p><h3 id=direct-input-mode>Toggle input mode on/off (Direct Input Mode)</h3><video playsinline aria-label="Configuring a key to toggle Typing Booster on/off" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/configuring-a-key-for-toggle-input-mode-on-off.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This video shows how to configure a key to quickly toggle Typing
Booster on/off.</p><p>It is possible to switch Typing Booster off by switching to another
input method or a keyboard layout. That can be done using either the
menu in the panel or the shortcut key to switch input methods which is
<code>Super_L</code>+<code>Space</code> by default.</p><p>Doing this with the menu in the panel is slow because one has to use the mouse.</p><p>But using the <code>Super_L</code>+<code>Space</code> shortcut to switch off Typing Booster is a
bit slow as well because:</p><ul><li><p>It needs two key presses by default</p></li><li><p>Even if one changes the default to something which needs only a
single key press, when pressing that key combination, a selection
menu of input methods and keyboard layouts pops up. Usually there
are more then just 2 input methods or keyboard layouts in that
menu. Therefore, one may need even more keypresses (<code>space</code> or the
<code>Left</code> or the <code>Right</code> arrow keys) to select the desired plain keyboard
layout to switch typing booster off.</p></li><li><p>By switching to the plain keyboard layout, one looses the <a href=#compose-support>Compose
support</a> of Typing Booster which has <a href=#special-compose-features-in-typing-booster>extra features</a>.</p></li></ul><p>Therefore, if one wants a really quick way to switch Typing Booster
off and on again while keeping the currently used keyboard layout and
the Compose support of Typing Booster, it is useful to configure a
keybinding for the command <code>toggle_input_mode_on_off</code> using the setup
tool as shown in the video.</p><p>By default, the keybinding for <code>toggle_input_mode_on_off</code> is empty.</p><p>As soon as the keybinding for <code>toggle_input_mode_on_off</code> is set to
something non-empty, a new option â€œâ˜‘ï¸ Remember input modeâ€ appears in
the â€œOptionsâ€ tab of the setup tool. If this option is switched on,
the current state, i.e. whether Typing Booster is currently on or off,
is remembered and restored when the desktop is restarted (or when Ibus
is restarted or the whole computer is rebooted).</p><p>Also, when the keybinding for <code>toggle_input_mode_on_off</code> is set to
something non-empty, a new entry in the menu in the panel appears
where one can switch Typing Booster on or off using the mouse.</p><p>The video shows that the icon in the panel changes when Typing Booster
is switched on or off. A rocket (ğŸš€) indicates that it is on, a snail
(ğŸŒ) indicates that it is off.</p><p>âš ï¸ <strong>Attention</strong>: There is a subtle difference between the IBus
key binding to switch between input methods (default <code>Super_L</code>+<code>space</code>)
and a Typing Booster key binding to switch Typing Booster on/off:</p><ul><li><p>The IBus key binding works everywhere on the desktop</p></li><li><p>The Typing Booster on/off key binding only works when something
which can receive input has focus</p></li></ul><p>See also: <a href=#key-bindings-only-when-input-focus>âš ï¸ Caveat: Key bindings can only work when there is input focus</a>.</p><h3 id=reopening-preedits>Reopening preÃ«dits</h3><video playsinline aria-label="Demonstration of reopening preÃ«dits" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/reopening-preedits.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This video shows that when the option â€œâ˜‘ï¸ Enable reopening preeditsâ€ is
switched on, preÃ«dits can be reopened when the cursor reaches the end
or the beginning of an already committed word again.</p><p>In the video one can see that â€œWriting some â€ is typed. The underline under
the word â€œsomeâ€ which indicates the preÃ«dit has already disappeard because
the word â€œsomeâ€ has been committed by typing the space.</p><p>But then the cursor is moved back by typing <code>Left</code> (arrow left) and
reaches the right end of the word â€œsomeâ€. This causes the word â€œsomeâ€
to be put into preÃ«dit again. Now â€œsomeâ€ is underlined again and a
completion â€œsomethingâ€ is suggested.</p><p>âš ï¸ <strong>Problems with this feature and why it doesnâ€™t always work at the moment</strong>:</p><p>To be able to do this reopening of preÃ«dits, the â€œsurrounding textâ€
feature must be available and work well. â€œsurrounding textâ€ means
that Typing Booster is able to ask â€œWhat text is there near the cursor
position?â€ and â€œWhat is the cursor position?â€. If getting the
surrounding text shows that there is a word next to the cursor like
â€œsomeâ€ in the above example, then â€œsurrounding textâ€ support enables
Typing Booster to delete that word from the text and to open a new
preÃ«dit containing that word an look for completions. If â€œsurrounding
textâ€ doesnâ€™t work right, reopening preÃ«dits cannot work correctly.</p><p>Not all toolkits and applications support â€œsurrounding textâ€ and some
implementations are incomplete and/or buggy. I try to detect when it
doesnâ€™t work right and if there seem to be problems then I donâ€™t
reopen the preÃ«dit.</p><p>Therefore, the are currently some limitations for reopening of
preÃ«dits:</p><ul><li><p>Does never work in Qt4 (no â€œsurrounding textâ€ support).</p></li><li><p>Does never work in X11 programs like â€œxtermâ€ (no â€œsurrounding textâ€
support).</p></li><li><p>Does never work in gnome-terminal and xfce4-terminal (<a href=https://gitlab.gnome.org/GNOME/vte/-/issues/214>incomplete
â€œsurrounding textâ€ implementation in
vte</a>). Typing
Booster detects these two terminals because they both set
<code>InputPurpose.TERMINAL</code>. When <code>InputPurpose.TERMINAL</code> is set, Typing
Booster does not try to reopen preÃ«dits at the moment (2021-09-16).</p></li><li><p>Does not seem to work in Gnome Wayland currently (2021-09-16), only
Gnome Xorg works.</p></li><li><p>There seem to be many bugs even in the â€œpartly workingâ€
implementations of â€œsurrounding textâ€:</p><ul><li><p>When a window receives focus, surrounding text seems to return
false results in that window until at least one commit happened
after receiving focus. To work around problems caused by this, I
donâ€™t try to reopen preÃ«dits if not at least one commit has happened
after a window received focus.</p></li><li><p>Sometimes, when I compare what â€œsurrounding textâ€ gives me before
and after a cursor movement, the difference is weird. For example,
when something like <code>Left</code> or &lsquo;BackSpace<code>has been typed and the difference between the â€œsurrounding textâ€ before and after that key cannot be explained by the effect of that key, then something must have gone wrong and I do **not** try to reopen the preÃ«dit. If I tried to reopen a preÃ«dit in such a case with wrong information from â€œsurrounding textâ€ it would cause chaotic results, so better to nothing than create a mess. Therefore, sometimes it happens that one types a key like</code>Left` and reaches the end of a word and no preÃ«dit
is opened.</p></li><li><p>Only the keys <code>Left</code>, <code>Right</code>, <code>KP_Left</code>, <code>KP_Right</code>, <code>BackSpace</code>,
<code>Delete</code>, <code>KP_Delete</code> are might currently reopen preÃ«dits. Other
keys which move the cursor like <code>Up</code>, <code>Down</code>, <code>Page_Up</code>, <code>End</code>, â€¦,
are currently (2021-09-16) not considered for reopening preÃ«dits.
At the moment, â€œsurrounding textâ€ support seems too buggy to
consider these other keys moving the cursor, the results returned by
â€œsurrounding textâ€ when these keys were typed are almost always
strange.</p></li><li><p>Positioning the cursor with the mouse currently <strong>never</strong> reopens
a preÃ«dit. I cannot get correct â€œsurrounding textâ€ results after mouse
movements at the moment (2021-09-16).</p></li></ul></li></ul><h3 id=disabling-in-terminals>Disabling in terminals</h3><video playsinline aria-label="Demonstration of disabling in terminals" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/disabling-in-terminals.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>The above video shows how to disable Typing Booster in terminals
using the</p><p>â˜‘ï¸ Disable in terminals</p><p>option.</p><p>Some users may want to disable Typing Booster in terminals because</p><ul><li><p>Shells like bash have their own features to complete commands,
options, and file names, which are often more useful for those
purposes than Typing Booster&rsquo;s completions, which are designed for
natural language text.</p></li><li><p>Sometimes password prompts are shown in shells when using <code>ssh</code>,
<code>sudo</code>, and others. When Typing Booster is active while typing a
password, the password will be visible in the preÃ«dit and saved to
Typing Booster&rsquo;s user database. Therefore, if you use Typing Booster
in a shell, you should be careful to switch it off manually when
typing passwords. If you don&rsquo;t find Typing Booster useful in shells,
it&rsquo;s easier to disable it completely for terminals.</p></li></ul><p>To disable Typing Booster in terminals, check the â€œâ˜‘ï¸ Disable in
terminalsâ€ option. If you do so, Typing Booster will mostly disable
itself in terminals, except for <a href=#compose-support>Compose support</a>, which doesnâ€™t
interfere with shell completion or password input.</p><p>Please note that whether this option works or not depends on the
terminal and desktop used. It works best for Gtk-based terminals like
xfce4-terminal, gnome-terminal, and gnome-console, as these set the
input purpose to <code>TERMINAL</code>, which Typing Booster can easily check. For
other terminals like konsole (from KDE) or Xorg-based terminals like
xterm, rxvt, urxvt, etc., Typing Booster falls back to checking the
program name and window title to determine whether they are terminals
it currently knows.</p><p>List of terminals currently known by Typing Booster which do not set
input purpose <code>TERMINAL</code>:</p><ul><li>konsole</li><li>xterm</li><li>rxvt</li><li>urxvt</li></ul><p>On Xorg desktops like Gnome Xorg, Plasma Xorg, Xfce, etc., Typing
Booster can reliably get the program name and window title using
<code>xprop</code>. Therefore, on Xorg it works reliably and out of the box for all
terminals Typing Booster knows. If you use a different terminal not on
the above list, please let us know so we can add it to the list.</p><p>On Wayland desktops like Gnome Wayland and Plasma Wayland, Typing
Booster uses the accessibility interface
<a href=https://en.wikipedia.org/wiki/Assistive_Technology_Service_Provider_Interface>AT-SPI</a>
to get the program name and window title. This works out of the box on
Gnome Wayland, but for Plasma Wayland you need to set
<code>QT_LINUX_ACCESSIBILITY_ALWAYS_ON=1</code> in the environment. If
you use non-Gtk Terminals in Plasma Wayland, please put <code>export QT_LINUX_ACCESSIBILITY_ALWAYS_ON=1</code> in your <code>~/.profile</code>. Getting
the program name and window title using AT-SPI mostly works just fine,
but in very rare circumstances it can fail; using <code>xprop</code> on Xorg
desktops is more reliable.</p><p>Please note that if you disable Typing Booster as described above in
terminals, you won&rsquo;t be able to switch it on again temporarily. If you
want to disable Typing Booster always when the focus enters a terminal
but still be able to switch it on using a key binding, please see the
more advanced setup in the â€œ<a href=#autosettings>Autosettings</a>â€ chapter.</p><h3 id=autosettings>Autosettings</h3><video playsinline aria-label="Demonstration of using autosettings" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/using-autosettings.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This video shows how one can add automatic settings, i.e. settings which
change automatically depending on which window gets focus. In the setup
tool of Typing Booster is an â€œAutosettingsâ€ tab where one can add
settings to be changed, and then enter the value the setting should be
changed to. Then one can add a regular expression which triggers the
change when it matches when a window or browser tab gets focus.</p><p>The client id string the regular expression needs to match consists of
three parts separated by â€œ:â€:</p><pre><code>&lt;im toolkit&gt;:&lt;program name&gt;:&lt;window title&gt;
</code></pre><p>Here are a few examples for such client id strings:</p><pre><code>gtk3-im:xfce4-terminal:Terminal - mfabian@fedora:~
gtk3-im:firefox:Duolingo - La meilleure faÃ§on d'apprendre l'italien â€” Mozilla Firefox
gtk3-im:gedit:Untitled Document 2 - gedit
gtk4-im:gnome-text-editor:New Document (Draft) - Text Editor
QIBusInputContext:konsole:~ : bash â€” Konsole
</code></pre><p>To check how exactly that client id string looks like for the window
or browser tab one is interested in one can set the â€œDebug levelâ€
option in the â€œOptionsâ€ tab in the setup tool to a value >= 1.</p><p>Then type into the window using Typing Booster until a candidate list
is shown On top of the candidate list there will be debug output like</p><pre><code>ğŸªŸgtk3-im:xfce4-terminal:Terminal - mfabian@fedora:~
</code></pre><p>This is also shown near the end of the demonstration video above, when
â€œtestâ€ is typed into the xfce4-terminal.</p><p>Or, one can grep the <code>debug.log</code> file for <code>apply_autosettings</code> like
this (also with â€œDebug levelâ€ >= 1):</p><pre><code>tail -F ~/.local/share/ibus-typing-booster/debug.log  | grep apply_autosettings
</code></pre><p>and see what appears there when the interested window or browser tab gets focus, one should see
matches like this:</p><pre><code>2023-02-27 15:13:27,739 hunspell_table.py line 6714 _apply_autosettings DEBUG: self._im_client=gtk3-im:xfce4-terminal:Terminal - mfabian@fedora:~
</code></pre><p>In the demonstration video these autosettings are added in the setup tool:</p><table><thead><tr><th>Setting</th><th>Value</th><th>Regular expression</th></tr></thead><tbody><tr><td><code>dictionary</code></td><td><code>en_GB,fr_FR</code></td><td><code>gtk3-im:gedit:</code></td></tr><tr><td><code>dictionary</code></td><td><code>it_IT,fr_FR</code></td><td><code>gtk3-im:firefox:Duolingo</code></td></tr><tr><td><code>inputmode</code></td><td><code>false</code></td><td><code>gtk3-im:.*terminal.*:</code></td></tr></tbody></table><p>The â€œdefaultâ€ dictionaries setup in the â€œDictionaries and input
methodsâ€ tab of the setup tool are <code>es_ES,de_DE</code>. In the video one
can see that â€œes_ES ğŸ‡ªğŸ‡¸â€ is shown in the floating toolbar of ibus while
the focus is still in the setup tool.</p><p>After finishing the setup of the autosettings, the focus is moved to
the â€œDuolingoâ€ tab in <code>firefox</code> and the dictionary setting
automatically changes to â€œit_IT,fr_FRâ€ which one can see in the
floating toolbar which now shows â€œit_IT ğŸ‡®ğŸ‡¹â€.</p><p>Then the focus is moved to <code>gedit</code> and the dictionaries are changed to
â€œen_GB,fr_FRâ€ which is visible in the floating toolbar as â€œen_GB ğŸ‡¬ğŸ‡§â€.</p><p>Finally, the focus is moved to the <code>xfce4-terminal</code> and the
dictionaries revert to the â€œdefaultâ€ value of <code>es_ES,de_DE</code> and the
floating toolbar shows â€œes_ES ğŸ‡ªğŸ‡¸â€ again. On top of that, the
autosetting to switch the input mode to <code>false</code> in the terminal did
match, one can see that because the icon in the floating toolbar and
the panel switched from ğŸš€ (Rocket, means Typing Booster is on) to ğŸŒ
(Snail, means Typing Booster is in direct input mode, which basically
means off except for <a href=#compose-support>Compose support</a>). But one can still switch
Typing Booster on again temporarily in that terminal if one has set a
keybinding for the command <code>toggle_input_mode_on_off</code>. For the
demonstration video, the keybinding for <code>toggle_input_mode_on_off</code> has
been set to <code>['Control+Tab']</code> (For details see <a href=#direct-input-mode>Toggle input mode
on/off (Direct Input Mode)</a>). When this key combination is
typed into the terminal, the icon changes from ğŸŒ to ğŸš€ again and
Typing Booster is on again in that terminal. Moving the focus out of
the terminal and back into the terminal switches Typing Booster off
again.</p><p>This differs from the <a href=#disabling-in-terminals>Disabling in terminals</a> option, which
completely disables Typing Booster without the option to switch it
back on within the terminal.</p><p>âš ï¸ <strong>Attention when using Wayland</strong>: On Wayland it may be necessary to
set the following environment variables in <code>~/.profile</code> to enable
Typing Booster to get the program names and window titles:</p><pre><code>export GNOME_ACCESSIBILITY=1
export QT_LINUX_ACCESSIBILITY_ALWAYS_ON=1
export QT_ACCESSIBILITY=1
</code></pre><p>On Wayland desktops like Gnome Wayland and Plasma Wayland, Typing
Booster uses the accessibility interface
<a href=https://en.wikipedia.org/wiki/Assistive_Technology_Service_Provider_Interface>AT-SPI</a>
to get the program name and window title (on Xorg desktops the <code>xprop</code>
program is used). This accessibility interface is enabled by default
on Gnome Wayland <strong>except</strong> for the two browsers <code>firefox</code> and
<code>google-chrome</code>. For these browsers, <code>GNOME_ACCESSIBILITY=1</code> has to
be in the environment to make it work. Qt5 programs on Wayland need
<code>QT_LINUX_ACCESSIBILITY_ALWAYS_ON=1</code> and Qt4 programs on Wayland need
<code>QT_ACCESSIBILITY=1</code>.</p><h3 id=forcing-an-ibus-keymap>Forcing an IBus keymap</h3><figure><img src=../../images/user-docs/setup-tool-options-tab-showing-use-ibus-keymap-option.png alt="Screenshot of the Options-Tab of the Typing Booster setup tool"><figcaption><p>Screenshot of the Options-Tab of the Typing Booster setup tool</p></figcaption></figure><p>By default, Typing Booster uses the keyboard layout which was active
before switching to Typing Booster. That is also probably the best for
most users.</p><p>For example, if one is using an EnglishÂ (US) keyboard layout and then
switches to Typing Booster, then that EnglishÂ (US) keyboard layout
will continue to be used in Typing Booster. If one uses a Russian
keyboard layout before switching to Typing Booster, then that Russian
layout will continue to be used in Typing Booster.</p><p>To change to using a different keyboard layout, one normally has to
switch to the keyboard layout one wants to use and then back to Typing
Booster.</p><p>But there are cases when one wants to always use an English layout
while using Typing Booster and always use other keyboard layouts while
not using Typing Booster.</p><p>If one does not need to use m17n input methods while using Typing
Booster, i.e. uses Typing Booster only with direct keyboard
input (â€œNoIMEâ€), any keyboard layout can be used.
Including keyboard layouts which donâ€™t produce ASCII letters like
Russian, Greek, and many other keyboard layouts.</p><p>But most m17n input methods require a keyboard layout which can
produce ASCII characters. Some even require the use of the
EnglishÂ (US) layout or layouts which are very close variants of the
EnglishÂ (US) layout like EnglishÂ (IN).</p><p>Therefore, if one wants to use m17n input methods in Typing Booster,
then one needs a keyboard layout which can produce ASCII characters.</p><p>It doesnâ€™t have to be a variant of the EnglishÂ (US) layout, many m17n
input methods work fine with any keyboard layout which can produce
ASCII characters, i.e. one could use a German or a French layout or
any other layout producing ASCII characters.</p><p>M17n input methods which work well with any keyboard layout producing
ASCII characters are phonetic input methods (e.g. something like
<code>hi-itrans</code>, <code>ru-translit</code>, â€¦) or postfix/prefix input methods
(e.g. <code>t-latn-post</code>, <code>t-latn-pre</code>, â€¦) or some symbol input methods
(<code>t-rfc1345</code>, <code>t-unicode</code>, â€¦).</p><p>As some of the m17n input methods make use of an <code>ISO_Level3_Shift</code>
key, it is a good idea if such a key is available. The EnglishÂ (IN)
layout has such a key on the right Alt key and is therefore usually a
better choice than the EnglishÂ (US) layout. But many other keyboard
layouts, for example the German layout or even some other variants of
the EnglishÂ (US) layout, for example English (US, Euro on 5) also
feature an <code>ISO_Level3_Shift</code> key, usually also on the right Alt key
(on some hardware keybords â€œAltGrâ€ is printed on the keycap). And in
some desktops, for example in the Gnome desktop, one can choose an
â€œAlternate Characters Keyâ€ in the keyboard settings of the control
centre. In the Gnome Control Centre one can choose to have that
â€œAlternate Characters Keyâ€ on â€œLeft Altâ€, â€œRight Altâ€, â€œLeft Superâ€,
â€œRight Superâ€, â€œMenu Keyâ€, or â€œRight Ctrlâ€. I.e. if using Gnome, one
could even use the basic EnglishÂ (US), which does not originally have
such a key and still have such a key because Gnome adds it.</p><p>Some m17n input methods emulate keyboard layouts. For example
<code>ar-kbd</code>, emulates an Arabic keyboard layout, <code>ru-kbd</code> emulates a
Russian keyboard layout, etc. â€¦ And the Indian <code>*-inscript</code> and
<code>*-inscript2</code> m17n input methods and several other Indian m17n input
methods are also emulating keyboard layouts. Almost all of the m17n
input methods emulating keyboard layouts assume that the â€œrealâ€
keyboard layout where the key events come from is based on the
EnglishÂ (US) layout. On top of that, many of these m17n input methods
also require that an <code>ISO_Level3_Shift</code> key is available, that makes
EnglishÂ (IN) almost always a better choice than EnglishÂ (US) (Unless
an <code>ISO_Level3_Shift</code> key is available for other reasons already, for
example because of Gnome, then the difference between EnglishÂ (IN) and
EnglishÂ (US) doesnâ€™t matter).</p><p>For the reasons explained above, some users may want to use an
EnglishÂ (IN) keyboard layout <strong>always</strong> while using a particular
Typing Booster engine but also use one or more very different keyboard
layouts when not using that particular Typing Booster engine
(i.e. when using just a keyboard layout, a different Typing Booster
engine or even a completely different input method like the Japanese
input method <code>ibus-anthy</code>).</p><p>For such users it is helpful, if a Typing Booster engine â€œtranslatesâ€
all incoming key events to a variant of an English keyboard layout
like EnglishÂ (IN) while that Typing booster engine is in use.</p><p>The option</p><p>â˜‘ï¸ Use IBus keymap [ EnglishÂ (IN) ]</p><p>does just that. If that option is selected, the key events coming from
the â€œrealâ€ keyboard layout are â€œtranslatedâ€ to the events which would
have been produced by the typed key if an EnglishÂ (IN) keyboard layout
had been active. I.e. the selection of the â€œrealâ€ keyboard layout is
not changed, it is still the same layout which was last used before
switching to that Typing Booster engine. But all the key events are
â€œtranslatedâ€ to the EnglishÂ (IN) IBus keymap.</p><p>IBus currently offers 4 such keymaps, as can be seen by looking into this
directory:</p><pre><code>$ ls /usr/share/ibus/keymaps/
common  in  jp  kr  modifiers  us
</code></pre><p>I.e. IBus supports the <code>in</code> â€œEnglishÂ (IN)â€, <code>jp</code> â€œEnglishÂ (JP)â€, <code>kr</code>
â€œEnglishÂ (KR)â€, and <code>jp</code> â€œEnglishÂ (JP)â€ keymaps.</p><p>The <code>in</code> IBus keymap is almost the same as the <code>us</code> IBus keymap and just
replaces the keycode 100 (wich is the right Alt key) with
<code>ISO_Level3_Shift</code>:</p><pre><code>$ cat /usr/share/ibus/keymaps/in
include us
keycode 100 = ISO_Level3_Shift
$
</code></pre><p>The <code>kr</code> IBus keymap is also almost the same as the <code>us</code> IBus keymap and
just adds to keys relevant only to Korean input:</p><pre><code>$ cat /usr/share/ibus/keymaps/kr
include us
keycode 122 = Hangul
keycode 123 = Hangul_Hanja
$
</code></pre><p>and the <code>jp</code> IBus keymap has all the alphanumeric characters on the
same keys as the <code>us</code> IBus keymap but has many non-alphanumeric
characters on different keys (and also adds some special keys
(<code>Zenkaku_Hankaku</code>, <code>Henkan_Mode</code>, â€¦)):</p><pre><code>$ cat /usr/share/ibus/keymaps/jp
include common
    shift keycode 2 = exclam
    shift keycode 3 = quotedbl
    shift keycode 4 = numbersign
    shift keycode 5 = dollar
    shift keycode 6 = percent
    shift keycode 7 = ampersand
    shift keycode 8 = apostrophe
    shift keycode 9 = parenleft
    shift keycode 10 = parenright
    shift keycode 11 = asciitilde
keycode 12 = minus
    shift keycode 12 = equal
keycode 13 = asciicircum
    shift keycode 13 = asciitilde
keycode 26 = at
    shift keycode 26 = grave
keycode 27 = bracketleft
    shift keycode 27 = braceleft
keycode 39 = semicolon
    shift keycode 39 = plus
keycode 40 = colon
    shift keycode 40 = asterisk
keycode 41 = Zenkaku_Hankaku
keycode 43 = bracketright
    shift keycode 43 = braceright
keycode 51 = comma
    shift keycode 51 = less
keycode 52 = period
    shift keycode 52 = greater
keycode 53 = slash
    shift keycode 53 = question
    shift keycode 58 = Eisu_toggle
keycode 89 = backslash
    shift keycode 89 = underscore
keycode 92 = Henkan_Mode
keycode 93 = Hiragana_Katakana
keycode 94 = Muhenkan
keycode 124 = yen
    shift keycode 124 = bar
keycode 122 = Hangul
keycode 123 = Hangul_Hanja
    shift keycode 84 = Execute
keycode 112 = Katakana
</code></pre><p>I think for most users which may want to use the option</p><p>â˜‘ï¸ Use IBus keymap [ EnglishÂ (IN) ]</p><p>â€œEnglishÂ (IN)â€ is the best choice as it is the same as EnglishÂ (US) except for
adding the important <code>ISO_Level3_Shift</code> key.</p><p>But as I wrote at the very start of this chapter, this option is
already quite special and most users probably do not need to use it at
all and should just leave it unchecked (which is the default):</p><p>â˜ Use IBus keymap [ EnglishÂ (IN) ]</p><p>Enable this only if you really need it and know what you are doing! It can
be very confusing!</p><h2 id=simulate-the-behaviour-of-ibus-m17n>Simulate the behaviour of ibus-m17n</h2><video playsinline aria-label="Simulating ibus-m17n (hi-itrans)" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/simulating-ibus-m17n-hi-itrans.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>The video demonstrates how to use the simple additional engines of
ibus-typing-booster to mimic the behavior of ibus-m17n.</p><p>âš ï¸ <strong>Note</strong>: The video shows underlining in the preedit text. That
option is off by default in both ibus-m17n and ibus-typing-booster.
But for this video it has been switched on because it is helpful to
compare the behavior of ibus-m17n with the Typing Booster engines
emulating it, it makes it easier to see that both commit text at the
exact same moments (The video has been recorded in a Gnome X11 session,
in a Gnome Wayland session the preedit is always underlined with a single
underline anyway, no matter how the options in the engines are set).</p><p>ibus-typing-booster can fully emulate the behavior of ibus-m17n by
configuring its settings to disable all advanced features, restricting
it to the simpler behavior of ibus-m17n.</p><p>Using ibus-typing-booster to simulate ibus-m17n has advantages,
including more active maintenance and likely fewer bugs.</p><p>To emulate ibus-m17n with ibus-typing-booster, one could use the
following setup options:</p><ul><li>Dictionaries and input methods tab:<ul><li>Remove all input methods except the one you want to use</li><li>Remove all dictionaries</li></ul></li><li>Options tab:<ul><li>Uncheck the option â€œâ˜ Word predictionsâ€</li><li>Uncheck the option â€œâ˜ Unicode symbols and emoji predictionsâ€</li><li>Make the entry for â€œEmoji trigger charactersâ€ empty</li><li>Check the option â€œOff the record modeâ€</li></ul></li><li>Key bindings tab:<ul><li>Bind the command â€œcommit_and_forward_keyâ€ to the key â€œLeftâ€</li></ul></li><li>Appearance tab:<ul><li>Set â€œPreedit underlineâ€ to â€œNoneâ€</li></ul></li></ul><p>With these settings, no candidate lists will appear because neither
words can be predicted nor emoji. This behavior matches ibus-m17n,
where candidate lists are never shown.</p><p>Additionally, binding the â€œcommit_and_forward_keyâ€ command to the
â€œLeftâ€ key ensures that the behavior is consistent with ibus-m17n,
where pressing &ldquo;Left&rdquo; does not move the cursor but commits the preedit
text.</p><p>Enabling â€œOff the record modeâ€ prevents user input from being
recorded. This is useful because recording input is typically meant to
improve suggestions based on prior inputâ€”something unnecessary when
suggestions are disabled.</p><p>Since dictionaries are also irrelevant without candidate lists, they
can be removed entirely or left as-isâ€”it makes no difference.</p><p>By default, Typing Booster retains text in the preedit until a word is
completed to predict completions. However, if the following conditions
are true:</p><ul><li>Only one input method</li><li>No word predictions (â€œâ˜ Word predictionsâ€)</li><li>No emoji predictions (â€œâ˜ Unicode symbols and emoji predictionsâ€)</li><li>The input does not start with an emoji trigger character</li></ul><p>then Typing Booster commits text as soon as possible, just like
ibus-m17n.</p><p>The emoji trigger characters do not have to be completely empty if one
prefers early commits like ibus-m17n does. It is possible to choose
one or more characters which rarely appear in normal typing as emoji
trigger characters. In that case, early commits can still happen
except for words which start with an emoji trigger character, these
words are kept in preedit then for the emoji search. For example if
<code>_</code> is used as an emoji trigger character, then the input
<code>_face_disappointed</code> will be kept in preedit and emojis will be
searched which match the 2 search words <code>face</code> and <code>disappointed</code>.</p><p>To simplify this setup process to emulate ibus-m17n, Typing Booster
offers preconfigured engines that emulate ibus-m17n out of the
box. For example:</p><pre><code>$ ibus list-engine  | grep latn-post 
  tb:t:latn-post - t-latn-post (tb)
  m17n:t:latn-post - t-latn-post (m17n)
$ ibus list-engine  | grep hi-itrans
  tb:hi:itrans - hi-itrans (tb)
  m17n:hi:itrans - hi-itrans (m17n)
$
</code></pre><p>For each <code>m17n:language:name</code> engine, Typing Booster provides a
corresponding <code>tb:language:name</code> engine with identical behavior. Using
these preconfigured engines eliminates the need to set up restrictions
manually, allowing you to keep the â€œnormalâ€ Typing Booster engine
unrestricted for advanced features like completion, spell-checking,
predictions, and multilingual input.</p><pre><code>$ ibus list-engine  | grep booster
  typing-booster - Typing Booster
$
</code></pre><p>unrestricted and still use the â€œnormalâ€ typing booster engine for its
more fancy features like completion, spellchecking, predictions based
on previous user input and multilingual input.</p><p>If you used the <code>â˜‘ï¸ Use US keyboard layout</code> option in an ibus-m17n
engine, you want to use the <code>â˜‘ï¸ Use IBus keymap [ English (IN) ]</code>
option to <a href=#forcing-an-ibus-keymap>force the use of an English IBus keymap</a> in the
ibus-typing booster engine mimicking that ibus-m17n engine.</p><p>âš ï¸ <strong>Current limitations</strong>:</p><ul><li><p><strong>Preedit Colours</strong> (currently work only on Xorg, not on Wayland):</p><p>Since Typing Booster >= 2.27.53, a foreground colour for the
m17n preedit text can be set.</p><p>Unlike ibus-m17n, Typing Booster does not support configuring a
background colour for the m17n preedit text This feature is
unlikely to be added.</p></li></ul><h1 id=key-and-mouse-bindings>Key and Mouse bindings</h1><h2 id=the-alt-gr-key>The â€œAltGrâ€ key</h2><p>Ibus-typing-booster does not change your keyboard layout, it just uses the keyboard layout which was selected last.</p><p>As some of the default key bindings in the table below use key combinations starting with â€œAltGrâ€, it is recommended to use a keyboard layout where the right â€œAltâ€ key is really an â€œAltGrâ€ key and not just a duplicate of the left â€œAltâ€ key. If you do not have a real â€œAltGrâ€ key, you can still use most of the key bindings in the table below but of course not those which start with â€œAltGrâ€. In that case, you might want to use the setup tool to <a href=#customizing-key-bindings>customize your key bindings</a>.</p><p>The standard â€œEnglish (US)â€ keyboard layout makes the â€œAltGrâ€ key on the right side of the space bar basically behave as a duplicate of the left â€œAltâ€ key. So if you like the US English layout, better use the keyboard layout â€œEnglish (US, with euro on 5)â€ instead of the standard one. â€œEnglish (US, with euro on 5)â€ is very similar to the standard â€œEnglish (US)â€ layout but has a real â€œAltGrâ€ key.</p><p>Many (but not all) keyboard layouts for other languages different from US English already have a real â€œAltGrâ€ key.</p><p>You can check whether your keyboard layout has a real â€œAltGrâ€ key with â€œxevâ€, â€œxevâ€ should show you the keysym â€œISO_Level3_Shiftâ€ when pressing the â€œAltGrâ€ (right â€œAltâ€) key and not the keysym â€œAlt_Râ€.</p><h2 id=table-of-default-key-bindings>Table of default key bindings</h2><p>Some of these key bindings can be customized in the setup tool, see <a href=#customizing-key-bindings>Customizing key bindings</a>. The following table explains the defaults.</p><table border=2 cellspacing=10 cellpadding=10><thead><tr><th>Key combination</th><th>Effect</th></tr></thead><tbody><tr><td><code>Space</code></td><td>Commit the preÃ«dit (or the selected candidate, if any) and send a
space to the application, i.e. commit the typed string followed by a
space.</td></tr><tr><td><code>Return</code></td><td>Commit the preÃ«dit (or the selected candidate, if any) and send a
<code>Return</code> to the application.</td></tr><tr><td><code>KP_Enter</code></td><td>Commit the preÃ«dit (or the selected candidate, if any) and send a
<code>KP_Enter</code> to the application.</td></tr><tr><td><code>Tab</code></td><td>Bound by default to the commands â€œselect_next_candidateâ€ and â€œenable_lookupâ€.<br><ul><li>If the option â€œâ˜ Enable suggestions by Tab keyâ€ is <em>not</em>
set: â€œTabâ€ always just executes â€œselect_next_candidateâ€
which selects the next candidate from the candidate list.</li><li>If the option â€œâ˜‘ Enable suggestions by Tab keyâ€ is set, no
candidate list is shown by default:<ul><li>If no candidate list is shown: â€œenable_lookupâ€ is executed
which requests to show the candidate list (nothing might be
shown if no candidates can be found).</li><li>If a candidate list is already shown:
â€œselect_next_candidateâ€ is executed which selects the next
candidate in the list. After each commit and after each
change of the contents of the preÃ«dit, the candidate list
will be hidden again until the â€œenable_lookupâ€ requests it
again.</li><ul></li></ul></td></tr><tr><td><code>Shift+Tab</code></td><td>Bound by default to the command â€œselect_previous_candidateâ€.<br>Selects the previous candidate in the candidate list.</td></tr><tr><td><code>Escape</code></td><td>Bound by default to the command â€œcancelâ€.<br><ul><li>When a candidate is selected (no matter whether this is a normal
lookup table or a â€œrelatedâ€ lookup table): Show the first page
of that lookup table again with no candidate selected.</li><li>When no candidate is selected:<ul><li>When a lookup table with related candidates is shown or a
lookup table where upper/lower-case has been changed by
typing the Shift key is shown: go back to the original
lookup table.</li><li>When a normal lookup table is shown: close it and clear the
preÃ«dit.</li></ul></li></ul></td></tr><tr><td><code>Left</code> (Arrow left)</td><td>Move cursor one typed key left in the preÃ«dit text. May trigger a
commit if the left end of the preÃ«dit is reached.</td></tr><tr><td><code>Control+Left</code></td><td>Move cursor to the left end of the preÃ«dit text. If the cursor is
already at the left end of the preÃ«dit text, trigger a commit and send
a <code>Control+Left</code> to the application.</td></tr><tr><td><code>Right</code> (Arrow right)</td><td>Move cursor one typed key right in preÃ«dit text. May trigger a
commit if the right end of the preÃ«dit is reached.</td></tr><tr><td><code>Control+Right</code></td><td>Move cursor to the right end of the preÃ«dit text. If the cursor is
already at the right end of the preÃ«dit text, trigger a commit and
send a <code>Control+Right</code> to the application.</td></tr><tr><td><code>BackSpace</code></td><td>Remove the typed key to the left of the cursor in the preÃ«dit
text.</td></tr><tr><td><code>Control+BackSpace</code></td><td>Remove everything to the left of the cursor in the preÃ«dit
text.</td></tr><tr><td><code>Delete</code></td><td>Remove the typed key to the right of the cursor in the preÃ«dit
text.</td></tr><tr><td><code>Control+Delete</code></td><td>Remove everything to the right of the cursor in the preÃ«dit
text.</td></tr><tr><td><code>Down</code> (Arrow down)</td><td>Bound by default to the command â€œselect_next_candidateâ€.<br>Selects the next candidate.</td></tr><tr><td><code>Up</code> (Arrow up)</td><td>Bound by default to the command â€œselect_previous_candidateâ€.<br>Selects the previous candidate.</td></tr><tr><td><code>Page_Up</code></td><td>Bound by default to the command â€œlookup_table_page_upâ€.<br>Shows the previous page of candidates.</td></tr><tr><td><code>Page_Down</code></td><td>Bound by default to the command â€œlookup_table_page_downâ€.<br>Shows the next page of candidates.</td></tr><tr><td><code>F1</code></td><td>Commit the candidate with the label â€œ1â€ followed by a space</td></tr><tr><td><code>F2<code></td><td>Commit the candidate with the label â€œ2â€ followed by a space</td></tr><tr><td>...</td><td>...</td></tr><tr><td><code>F9</code></td><td>Commit the candidate with the label â€œ9â€ followed by a space</td></tr><tr><td><code>Control+F1</code></td><td>Remove the candidate with the label â€œ1â€ from the database of learned
user input (If possible, if this candidate is not learned from user
input, nothing happens).</td></tr><tr><td><code>Control+F2</code></td><td>Remove the candidate with the label â€œ2â€ from the database of learned
user input (If possible, if this candidate is not learned from user
input, nothing happens).</td></tr><tr><td>â€¦</td><td>â€¦</td></tr><tr><td><code>Control+F9</code></td><td>Remove the candidate with the label â€œ9â€ from the database of learned
user input (If possible, if this candidate is not learned from user
input, nothing happens).</td></tr><tr><td><code>1</code> â€¦ <code>9</code></td><td>By default, same as <code>F1</code> â€¦ <code>F9</code>.<br>Selecting candidates with <code>1</code> â€¦ <code>9</code> is a bit easier
because the number keys <code>1</code> â€¦ <code>9</code>
are closer to the fingers then <code>F1</code> â€¦ <code>F9</code> on
most keyboards. On the other hand, it makes completing when typing
numbers impossible and it makes typing strings which are combinations
of letters and numbers like â€œA4â€ more difficult. If digits are used as
select keys, numbers can only be typed when no candidate list is
shown. In most cases this means that numbers can only be typed when
nothing else has been typed yet and the preÃ«dit is empty.</td></tr><tr><td><code>KP_1</code> â€¦ <code>KP_9</code></td><td>By default, same as <code>F1</code> â€¦ <code>F9</code>.</td></tr><tr><td><code>Control+1</code> â€¦ <code>Control+9</code></td><td>By default, same as <code>Control+F1</code> â€¦ <code>Control+F9</code>.</td></tr><tr><td><code>AltGr+F6</code></td><td>Bound by default to the command â€œtoggle_emoji_predictionâ€.<br>Toggle the <a href=#6>emoji and Unicode
symbol</a> prediction on/off. This has the same result as using
the setup tool to change this.</td></tr><tr><td><code>AltGr+F9</code></td><td>Bound by default to the command â€œtoggle_off_the_recordâ€.<br>Toggle the â€œOff the recordâ€ mode. This has the same result as
using the setup tool to change this.<br>While â€œOff the recordâ€ mode is on, learning from user input is
disabled. If learned user input is available, predictions are
usually much better than predictions using only
dictionaries. Therefore, one should use this option
sparingly. Only if one wants to avoid saving secret user input to
disk it might make sense to use this option temporarily.</td></tr><tr><td><code>AltGr+F10</code></td><td>Bound by default to the command â€œsetupâ€.<br>Opens the setup tool.</td></tr><tr><td><code>AltGr+F12</code></td><td>Bound by default to the command â€œlookup_relatedâ€.<br>Shows related <a href=#6>emoji and Unicode symbols</a>
or <a href=#7>related words</a></td></tr><tr><td><code>AltGr+Space</code></td><td>Insert a literal space into the preÃ«dit.</td></tr></tbody></table><p>When more than one input method at the same time is used, the following additional key bindings are available:</p><table border=2 cellspacing=10 cellpadding=10><thead><tr><th>Key combination</th><th>Effect</th></tr></thead><tbody><tr><td><code>Control+Down</code></td><td>Bound by default to the command â€œnext_input_methodâ€.<br>Switches the input method used for the preÃ«dit to the next input
method.</td></tr><tr><td><code>Control+Up</code></td><td>Bound by default to the command â€œprevious_input_methodâ€.<br>Switches the input method used for the preÃ«dit to the previous input
method.</td></tr></tbody></table><h2 id=mouse-bindings>Mouse bindings</h2><p>These mouse bindings are currently hardcoded and can not yet be customized.</p><table border=2 cellspacing=10 cellpadding=10><thead><tr><th>Mouse event</th><th>Effect</th></tr></thead><tbody><tr><td><code>Button1</code> click on a candidate</td><td>Commit the candidate clicked on followed by a space (Same as
F1â€¦F9).</td></tr><tr><td><code>Control+Button1</code> click on a candidate</td><td>Remove clicked candidate from database of learned user input (If
possible, if this candidate is not learned from user input,
nothing happens).</td></tr><tr><td><code>Button3</code> click on a candidate</td><td>Show related <a href=#6>emoji and Unicode symbols</a>
or <a href=#7>related words</a> (Same as
AltGr+F12).</td></tr><tr><td><code>Control+Button3</code> click anywhere in the candidate list</td><td>Toggle the <a href=#6>emoji and Unicode
symbol</a> prediction on/off (Same as AltGr+F6). This has the same
result as using the setup tool to change this.</td></tr><tr><td><code>Alt+Button3</code> click anywhere in the candidate list</td><td>Toggle the â€œOff the recordâ€ mode (Same as AltGr+F9). This has the
same result as using the setup tool to change this.<br>While â€œOff the recordâ€ mode is on, learning from user input is
disabled. If learned user input is available, predictions are
usually much better than predictions using only
dictionaries. Therefore, one should use this option
sparingly. Only if one wants to avoid saving secret user input to
disk it might make sense to use this option temporarily.</td></tr></tbody></table><h2 id=key-bindings-only-when-input-focus>âš ï¸ Caveat: Key bindings can only work when there is input focus</h2><p>Key bindings of Typing Booster only work when
something where one can actually can type into has focus.</p><p>For example, if you type some keys while the focus is on the desktop
background or while the focus is on a webpage and no input area in
that webpage has focus, then Typing Booster doesnâ€™t see these key
events at all! So there is no way Typing Booster can react in any way
to such key events.</p><p>Only when something has focus which can actually receive input Typing
Booster gets the key events and can react to the key events and do
something.</p><h2 id=customizing-key-bindings>Customizing key bindings</h2><video playsinline aria-label="Customizing key bindings" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/key-bindings-customization.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This video shows how one can change a keybinding.</p><p>In the â€œKey bindingsâ€ tab of the setup tool of ibus-typing-booster one
sees a list of commands and the key combinations bound to execute
these commands.</p><p>As an example, the video shows changing the key binding for the command
â€œselect_next_candidateâ€. By default this command is bound to
<code>['Tab', 'ISO_Left_Tab', 'Down', 'KP_Down']</code>.</p><p>The video shows how to remove the key <code>Tab</code> and add <code>Control+Tab</code>
instead and then, finally use the â€œSet to defaultâ€ button to
go back to the default setting.</p><p>And can also see in the screenshot that some commands are bound by
default to Mod5+something. Mod5 is Usually ISO_Level3_Shift and this
is mapped to the AltGr key on many keyboard layouts, see also The
â€œAltGrâ€ key. If your keyboard layout does not have that key, you might
want to change these settings.</p><h3 id=customizing-key-bindings-using-digits>Customizing key bindings using digits</h3><p>In the <a href=#table-of-default-key-bindings>default key bindings</a>, the digit keys on the â€œnormalâ€
layout (<code>1</code>, â€¦, <code>9</code>) <strong>and</strong> the digit keys on the keypad (<code>KP_1</code>, â€¦,
<code>KP_9</code>) <strong>and</strong> the <code>F1</code>, â€¦, <code>F9</code> keys are bound to the commands
<code>commit_candidate_1_plus_space</code>, â€¦, <code>commit_candidate_9_plus_space</code>.</p><p>The digit keys <code>1</code>, â€¦, <code>9</code> are usually closer to the fingers as the
<code>F1</code>, â€¦, <code>F9</code> keys and thus somewhat more convenient to commit
candidates via their number. But using the digits for that purpose
makes it impossible to type digits into the preÃ«dit.</p><p>That makes typing something like â€œA4 paperâ€ quite difficult.
Because when the <code>A</code> is typed, some completions starting with â€œAâ€
are shown and the <code>4</code> then selects the 4th completion candidate!</p><p>To get â€œA4â€ one could type something like <code>A</code> <code>space</code> <code>BackSpace</code> <code>4</code>,
the <code>space</code> commits â€œA â€, then the <code>BackSpace</code> removes the extra â€œ â€
and then the <code>4</code> adds a â€œ4â€ because now there is no preÃ«dit.
Or type <code>A</code> <code>Right</code> <code>4</code>, the arrow-right commits the preÃ«dit and then
the <code>4</code> adds a â€œ4â€ because now there is no preÃ«dit.</p><p>To be able to type digits at all when digits are bound to commands in
the key bindings, digits are committed <strong>immediately</strong> when there is
no preÃ«dit. But that makes it also impossible to type <code>2</code> and get it
completed to â€œ2021â€. As the â€œ2â€ is committed immediately, no
completion can be tried.</p><p>Being able to type digits into the preÃ«dit is also necessary if
one wants to use the <a href=#unicode-code-point-input>Unicode code point input</a> feature.</p><p>If one wants to treat digits more like other keys and be able to type
text containing digits into the preÃ«dit, it is necessary to remove either
the regular digits or the keypad digits from the keybindings, whichever you prefer.</p><p>You can also remove both from the keybindings if you want, that still
leaves you with the <code>F1</code> â€¦ <code>F9</code> keys to commit candidates.</p><p>On can of course also select the desired candidate by typing the keys
bound to the command â€œselect_next_candidateâ€ (by default <code>Tab</code>,
<code>ISO_Left_Tab</code>, <code>Down</code>, <code>KP_Down</code>) and then <code>space</code>. Personally, I use
that far more often than committing the candidate directly via its
number.</p><h3 id=key-bindings-temporary-predictions>Key bindings for temporary emoji and word predictions</h3><p>David Mandelberg contributed two new key-bindable commands:</p><p><code>trigger_emoji_predictions</code> and <code>trigger_word_predictions</code>. These are
useful when you want predictions disabled by default but still wish to
request them temporarily while typing the next word.</p><p>For example, pressing the key bound to trigger_emoji_predictions will
enable emoji and Unicode character predictions <em>only</em> for the next
word you type. After that word is completed, predictions turn off
automatically. This differs from <code>toggle_emoji_prediction</code>, which
enables emoji and Unicode predictions <em>indefinitely</em>â€”requiring manual
disabling later.</p><h3 id=command-show-selection-info>Display Character or Selection Information</h3><video playsinline aria-label="Display Character or Selection Information" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/command-show-selection-info.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>The <code>show_selection_info</code> command provides detailed information about either:</p><ul><li>The currently selected text</li></ul><p><strong>or</strong>, if no text is selected or if selection retrieval fails (it often fails on Wayland):</p><ul><li>The grapheme cluster immediately to the left of the cursor (a grapheme cluster might consist of several Unicode code points)</li></ul><h4 id=example>Example</h4><p>If the cursor is positioned after <code>ğŸ§™ğŸ½â€â™€ï¸|</code> (where <code>|</code> marks the cursor), executing the command displays a candidate list like this:</p><pre><code>(1/8)ğŸ”—
1 ğŸ§™ğŸ½â€â™€ï¸ woman mage 
2 â”œâ”€ ğŸ§™ U+1F9D9 mage
3 â”œâ”€ ğŸ½ U+1F3FD emoji modifier fitzpatrick type-4
4 â”œâ”€ U+200D zero width joiner
5 â”œâ”€ â™€ U+2640 female sign
6 â””â”€ U+FE0F variation selector-16
7 U+1F9D9 U+1F3FD U+200D U+2640 U+FE0F
8 ğŸ§™ U+1F9D9 mage ğŸ½ Uâ€¦riation selector-16
</code></pre><h4 id=usage>Usage</h4><ul><li>Press <code>Escape</code> to close the list.</li><li>Select a candidate to insert its information at the cursor position
(useful for explaining Unicode characters or sequences).</li></ul><h4 id=special-candidates>Special Candidates</h4><ul><li>The <strong>second-to-last</strong> <strong>candidate</strong> lists all code points in the analyzed text.</li><li>The <strong>last candidate</strong> provides a full breakdown of each code point with names.</li></ul><p>âš ï¸ <strong>Limitations on Wayland</strong>:</p><p>This feature works reliably on <strong>Xorg</strong>, but <strong>Wayland</strong> currently has some unresoved issues:</p><ul><li><p><strong>Selection Content Unavailable</strong></p><p>ğŸ”— <a href=https://github.com/ibus/ibus/issues/2760>GitHub Issue #2760</a>:
Typing Booster cannot retrieve selected text on Wayland using surrounding text.</p><p><strong>Workaround:</strong></p><ul><li><p>Install the <code>wl-paste</code> program (On Fedora this is in
the <code>wl-clipboard</code> package). If <code>wl-paste</code> is available and
getting the selection using surrounding text fails, using <code>wl-paste</code> to get
the primary selection is attempted. This usually works.</p></li><li><p>If getting the selection using <code>wl-paste</code> fails as well or
<code>wl-paste</code> is unavailable getting the primary selection using Gtk4
is attempted.</p></li><li><p>If all attempts to get the selection failed (or nothing was
selected in the first place) surrouding text is used to get the
character to the <strong>left of the cursor</strong> and show information about
that character.</p></li></ul></li><li><p><strong>Cursor Position Not Updated After Mouse Movement</strong></p><p>ğŸ”— <a href=https://github.com/ibus/ibus/issues/2765>GitHub Issue #2765</a>
When you move the cursor <strong>using the mouse</strong> in GNOME/Wayland:</p><ul><li>The surrounding text does not update the cursor position.</li><li>Executing <code>show_selection_info</code> will show information for the character
at the <strong>previous cursor position</strong> (before mouse movement).</li></ul><p><strong>Workaround:</strong></p><p>After moving the cursor with the mouse, press â† then â†’ (left/right
arrow keys) to force a position update. The command will then work
as expected.</p></li></ul><h1 id=multilingual-input>Multilingual input</h1><video playsinline aria-label="Setup several dictionaries and input methods" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/setup-several-dictionaries-and-input-methods.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This video shows how to setup multiple dictionaries and input methods.</p><p>Ibus-typing-booster supports using more than one dictionary and more
than one input method/transliteration at the same time.</p><p>That makes it possible to write text in more than one language without
having to switch languages manually. If one often writes in different
languages this can save a lot of input method switching.</p><p>This works not only when the languages use same script (like using
English and Spanish at the same time), it works even when the
languages use different scripts. For example when using English (Latin
script) and Hindi (Devanagari script) at the same time. When using
languages with different scripts at the same time, it is sometimes
necessary to switch the input method for the preÃ«dit (See the Hindi
and English example). But even in such a more complicated case,
switching is often not necessary, often one can select a suitable
candidate without switching and save a lot of input method switches.</p><p>This video shows how dictionaries can be added using the â€œâ•â€ button
below the list of dictionaries in the â€œDictionaries and input methodsâ€
tab of the setup tool.</p><p>The check marks (â€œâœ”ï¸â€) and the cross marks (â€œâŒâ€) indicate whether a
spellchecking dictionary and/or and emoji dictionary for that
language/locale is currently available on your system. If a dictionary
is shown with a cross mark (â€œâŒâ€) as not available, that does not
necessarily mean that it is not available at all for your system,
maybe you just need to install an additional package.</p><p>For obscure technical reasons, the maximum number of dictionaries you
can use at the same time is currently limited to 10. But that should
be plenty, one should not overdo it, the more dictionaries one adds,
the slower ibus-typing-booster becomes and the prediction quality
suffers. So only add the dictionaries you really need.</p><p>This video also shows how input methods can be added to
ibus-typing-booster using the â€œâ•â€ button below the list of input
methods in the â€œDictionaries and input methodsâ€ tab of the setup tool.</p><p>Just like for the dictionaries, for obsure technical reasons the
maximum number of input methods you can currently use at the same time
is limited to 10. But that should be plenty.</p><p>One should only add as many input methods as one really needs, adding
more would only slow down the system and reduce the accuracy of the
predictions.</p><p>Near the end this video also shows how one can try to install missing
dictionaries, i.e. dictionaries marked with a cross mark (â€œâŒâ€) by
clicking on the â€œInstall missing dictionariesâ€ button.</p><p>When this button is clicked, one can see a black box with the text
â€œAdditional Packages Requiredâ€ â€œAn application is requesting
additional packages.â€ appearing near the top of the screen, just below
the Gnome panel.</p><p>When clicking that black box, the package manager will try to install
packages for the missing dictionaries, if possible. For â€œfr_FRâ€
(French) and â€œes_ESâ€ (Spanish) this will succeed on Fedora 34 and show
options to install the â€œhunspell-frâ€ and the â€œhunspell-esâ€
package. For â€œzhâ€ (Chinese) and â€œja_JPâ€ Japanese this will not
succeed, there are no hunspell dictionaries for these languages on
Fedora 34. That does not mean that adding the â€œzhâ€ and â€œja_JPâ€
dictionaries in the setup tool is pointless, the check mark (â€œâœ”ï¸â€) is
shown after emoji. That means emoji dictionaries for these languages
are available and even installed at the moment. So if you want to
match emoji in Chinese or Japanese, these dictionaries could still be
useful.</p><p>The button â€œInstall missing dictionariesâ€ uses the service offered by
the â€œPackagekitâ€ daemon to try to install package. If the
<code>packagekitd</code> is not running, this will not work. The UI shown by
â€œPackagekitâ€ differs a bit depending on whether you do this on Gnome,
XFCE, or something else. On some distributions, the names for the
packages containing the needed hunspell dictionaries might be
different causing this to fail. If this button doesnâ€™t work, there is always
the option to install dictionaries using the command line, for example on
Fedora:</p><pre><code>sudo dnf install hunspell-es hunspell-fr
</code></pre><h2 id=example-hindi-english>Example using Hindi and English at the same time</h2><video playsinline aria-label="Example using Hindi and English at the same time" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/Example-using-Hindi-and-English-at-the-same-time.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This video shows how Hindi and English can be used at the same time in
ibus-typing-booster.</p><p>If one uses both Hindi and English often, it is possible to setup
ibus-typing-booster to use both languages at the same time. Then one
can just type in either Hindi or English and ibus-typing-booster will
show suitable candidates automatically.</p><p>In the â€œDictionaries and input methodsâ€ tab of the setup tool one can
see that two dictionaries have been added, â€œhi_INâ€ for Hindi and
â€œen_GBâ€ for British English. And two input methods have been added,
â€œhi-itransâ€ to type Hindi and â€œNoImeâ€ (â€œNative Keyboardâ€, i.e. direct
keyboard input) to type English (How to setup dictionaries and input
methods is described <a href=#basic-setup-for-your-language>here</a>.).</p><p>There are several input methods available for Hindi: â€œhi-inscript2â€,
â€œhi-inscriptâ€, â€œhi-phoneticâ€, â€œhi-itransâ€, â€œhi-remingtonâ€,
â€œhi-typewriterâ€, and â€œhi-vedmataâ€. In this example we use â€œhi-itransâ€
but one could also use any of the others or even several at once.</p><p>If more than one input/transliteration method is enabled, the typed
keys will be transliterated with each transliteration method and each
transliteration result will be looked up in the enabled dictionaries
and in the user database of previous input.</p><p>In this video, Hindi with the â€œhi-itransâ€ method and English are used
at the same time. One can see in the preedit that the input â€œguruâ€ has
been typed. The candidate list shows both â€œà¤—à¥à¤°à¥â€ (which is the
transliteration of the input â€œguruâ€ using the â€œhi-itransâ€ method) and
the English candidates â€œguruâ€ and â€œgurusâ€. This is because both the
transliteration â€œà¤—à¥à¤°à¥â€ and the direct input â€œguruâ€ are used at the same
time to lookup candidates.</p><p>Actually it is quite rare to see candidates from both Hindi and
English in a candidate list. The English word â€œguruâ€ is a loanword
from Hindi, it is just the transliteration of the original Hindi word
into the Latin Alphabet. Therefore, the â€œItransâ€ method transliterates
it back to Hindi and one gets a match in Hindi as well. Most English
words do not transliterate to anything meaningful in Hindi and most
Hindi input does not match anything in English either. The example
â€œguruâ€ is carefully chosen to show how ibus-typing-booster handles
multilingual input.</p><p>In practice, as soon as one has typed a few characters, one will most
of the time see only candidates from either Hindi or English, not
both. I.e. the language one is typing in at the moment is
automatically detected because one very rarely gets matches in the
other language.</p><p>This automatic language detection works even better after
ibus-typing-booster has learned from user input for a while. Because
ibus-typing-booster remembers the context where the user has typed
words.</p><p>Whether the preÃ«dit (i.e. the current input, i.e. the underlined text
next to the candidate list) shows Latin alphabet â€œguruâ€ or Devanagari
â€œà¤—à¥à¤°à¥â€ depends on which input method currently has highest priority,
â€œNoImeâ€ (which produces Latin alphabet) or â€œhi-itransâ€ which produces
Devanagari.</p><p>Switching the priority of the input methods is sometimes necessary
because one may not want to select any of the displayed candidates but
commit the preÃ«dit instead by typing a space. For example, if the
preÃ«dit is currently in English mode (direct input mode) and one types
a Hindi word, it may happen that one does not get any matches in the
candidate list, although the word has been typed correctly. This may
happen if this word can neither be found in the dictionary nor in the
user database because this word has never been typed before by the
user. Nevertheless it may be a correct Hindi word of course and the
user may want to commit it. But if the preÃ«dit is currently in English
mode, typing space would commit the Latin characters. So one has to
switch the preÃ«dit to â€œhi-itransâ€ first and then commit by typing a
space.</p><p>The default key bindings to switch the input method for the preÃ«dit
are â€œControl+Downâ€ and â€œControl+upâ€. With only two input methods as in
the current example, both key bindings behave the same. But there can
be more than two input methods and then â€œControl+Downâ€ moves in one
direction through the list of input methods and â€œControl+Upâ€ in the
other direction (see <a href=#key-and-mouse-bindings>key and mouse bindings</a>).</p><p>As an alternative to using the â€œControl+Downâ€ and â€œControl+Upâ€ key
bindings, the priorities of input methods can also be switched using
the menu in the gnome panel or using the setup tool.</p><p>In the setup tool, there is an option â€œâ˜ Remember last used preÃ«dit
input methodâ€. If that option is disabled, ibus-typing-booster will
always start using the input method with the highest priority as set
in the setup tool for the preÃ«dit when you log in to your desktop and
use ibus-typing-booster for the first time after the login. In that
case, changing the input method priorities with the key bindings or
the Gnome panel has no permanent effect, it will not change the order
in the setup tool in that case. With this option disabled, only
changing the priorities directly in the setup tool has a permanent
effect.</p><p>But if the option â€œâ˜‘ï¸ Remember last used preÃ«dit input methodâ€ is
enabled, ibus-typing-booster will change the priority in the setup
when you switch to a different input method for the preÃ«dit using the
key bindings or the Gnome panel. In the video it can be seen that the
order of the input methods in the setup tool changes even though the
â€œâ†‘â€ and â€œâ†“â€ buttons in the setup tools have not been clicked but the
key bindings or the menu in the Gnome panel have been used and this
had an effect on the order shown in the setup tool because the option
â€œâ˜‘ï¸ Remember last used preÃ«dit input methodâ€ was enabled during the
video.</p><h2 id=example-spanish-english>Example using Spanish and English at the same time</h2><figure><img src=../../images/user-docs/Example-using-Spanish-and-English-at-the-same-time.gif alt="Using Spanish and English at the same time"><figcaption><p>Using Spanish and English at the same time</p></figcaption></figure><p>This animated gif shows using ibus-typing-booster for Spanish and
English at the same time. In the setup tool, dictionaries for Spanish
(â€œes_ESâ€) and British English (â€œen_GBâ€) have been added. And two input
methods â€œt-latn-preâ€ and â€œNoImeâ€ (Native Keyboard, i.e. direct
keyboard input) have been added. Actually using only â€œNoImeâ€ would
have been enough, both Spanish and English can be typed just fine with
direct keyboard input with a suitable keyboard layout. Adding
â€œt-latin-preâ€ makes it possible to type for example â€œ~nâ€ to get an
â€œÃ±â€, i.e. using â€œt-latn-preâ€ one can type accented Latin charaters
even when using a US English keyboard layout for example. But that is
completely optional, one can use only â€œNoImeâ€, only â€œt-latn-preâ€, or
both, depending on what keyboard layout one wants to use and what is
most convenient.</p><p>When the input typed is â€œYo soy un hâ€ where the last character, the
â€œhâ€ is still in preÃ«dit (marked by the underline) and we see some
suggestions how the word starting with â€œhâ€ might continue.</p><p>The suggestions shown for this input are Spanish words, not
English. This is because ibus-typing-booster has already been trained
by similar user input before. Therefore, it already knows which word
starting with â€œhâ€ the user usually types following â€œsoy unâ€. And these
are Spanish words.</p><p>In the second line of the editor the user now types some English after
finishing the Spanish sentence.</p><p>The input typed is now â€œI am hâ€ and again the last character â€œhâ€ is
still in preÃ«dit and some suggestions for words starting with â€œhâ€ are
shown.</p><p>This time, the suggestions for words starting with â€œhâ€ are English,
not Spanish. This is because the words typed before were â€œI amâ€ and
the user apparently types the suggested English words frequently after
â€œI amâ€.</p><p>So ibus-typing-booster can often automatically show candidates from
the correct language according to the context. This makes it quite
efficient to type multiple languages.</p><p>One can add as many dictionaries as one likes, but adding more
dictionaries than one really needs slows the system down unnessarily
and reduces the prediction accuracy.</p><h1 id=compose-support>Compose support (About dead keys and the Compose key)</h1><p>â€œCompose sequencesâ€ are sequences of keys containing so
called â€œdead keysâ€ or containing the â€œCompose keyâ€ or even both
and usually one or more â€œnormalâ€ keys.</p><h2 id=dead-keys>â€œDead keysâ€</h2><p>Some keyboard layout have so called <a href=https://en.wikipedia.org/wiki/Dead_key>â€œdead
keysâ€</a>. They are called â€œdeadâ€
because in traditional implementations like in the Compose sequence
implementation of
<a href=https://en.wikipedia.org/wiki/X_Window_System>Xorg</a> they seem to do
nothing at first, i.e. they appear to be â€œdeadâ€. For example when
typing a dead â€œ~â€, nothing appears to happen but when a base character
like â€œaâ€ is typed next, an â€œÃ£â€ appears. Some more examples:</p><table><thead><tr><th>Dead key sequence</th><th>Result</th></tr></thead><tbody><tr><td><code>~</code> <code>a</code></td><td>Ã£ U+00E3 LATIN SMALL LETTER A WITH TILDE</td></tr><tr><td><code>~</code> <code>^</code> <code>a</code></td><td>áº« U+1EAB LATIN SMALL LETTER A WITH CIRCUMFLEX AND TILDE</td></tr><tr><td><code>~</code> <code>â </code></td><td>~ U+007E TILDE</td></tr><tr><td><code>~</code> <code>~</code></td><td>~ U+007E TILDE</td></tr><tr><td><code>~</code> <code>@</code></td><td>undefined sequence, i.e. no result</td></tr></tbody></table><p>But on several modern implementations, these keys are not so â€œdeadâ€
anymore, the behaviour is improved and something helpful is actually
displayed while typing such sequences.</p><ul><li><p>Xorg:</p><p>When using the Compose support of Xorg, for example when typing into
an Xorg application like xterm (i.e. <strong>not</strong> a Gtk application)
while <strong>not</strong> having configured any input methods systems like IBus,
these dead keys are really â€œdeadâ€, nothing is displayed until the
dead key sequence is finished. Any illegal/impossible/undefined
sequence is silently discarded, i.e. when typing something like dead
<code>~</code> <code>@</code>, nothing at all happens.</p></li><li><p>MacOS:</p><p>Typing a dead <code>~</code> shows the <code>~</code> and highlights it, when the key for
the base characters is pressed, the final character appears</p></li><li><p>Gtk, IBus, Typing Booster:</p><p>Similar to MacOS, these 3 implementations show the dead keys,
highlight them, let the user correct unfinished sequences with
BackSpace, and may do more helpful stuff with undefined sequences
then just silently discarding them.</p></li></ul><p>Some keyboard layouts make extensive use of dead keys. For example the
<a href=https://en.wikipedia.org/wiki/British_and_American_keyboards#International_or_extended_keyboard_layouts>British or American international
layouts</a>. In
Linux (or FreeBSD, &mldr;) you can select the American international
layout by selecting â€œEnglish (US, international with dead keys)â€ in
the setup of your desktop.</p><p>The â€œEnglish (US, international with dead keys)â€ layout looks like this:</p><figure><img src=../../images/user-docs/800px-KB_US-International.svg.png alt="English (US, international with dead keys) (picture from Wikipedia)"><figcaption><p>English (US, international with dead keys) (picture from <a href=https://en.wikipedia.org/wiki/British_and_American_keyboards#/media/File:KB_US-International.svg>Wikipedia</a>)</p></figcaption></figure><p>The keys marked in red on this layout are â€œdeadâ€ keys.</p><p>Of course that â€œEnglish (US, international with dead keys)â€ is not the only layout with dead keys, many national layouts use dead keys as well.</p><h2 id=the-compose-key>The â€œComposeâ€ key</h2><p>Wikipedia explains nicely what a <a href=https://en.wikipedia.org/wiki/Compose_key>Compose
key</a> is. It is often also
called â€œmulti keyâ€ (because the keysym defined in
<code>/usr/include/X11/keysymdef.h</code> is <code>XK_Multi_key</code>).</p><p>Some examples for Compose sequences involving a Compose key:</p><table><thead><tr><th>Compose sequence involving Compose key</th><th>Result</th></tr></thead><tbody><tr><td><code>compose</code> <code>~</code> <code>n</code></td><td>Ã± U+00F1 LATIN SMALL LETTER N WITH TILDE</td></tr><tr><td><code>compose</code> <code>o</code> <code>c</code></td><td>Â© U+00A9 COPYRIGHT SIGN</td></tr><tr><td><code>compose</code> <code>1</code> <code>2</code></td><td>Â½ U+00BD VULGAR FRACTION ONE HALF</td></tr><tr><td><code>compose</code> <code>-</code> <code>-</code> <code>-</code></td><td>â€” U+2014 EM DASH</td></tr><tr><td><code>compose</code> <code>n</code> <code>o</code> <code>n</code> <code>s</code> <code>e</code> <code>n</code> <code>s</code> <code>e</code></td><td>probably undefined sequence, i.e. no result</td></tr></tbody></table><p>The default Compose key on Xorg seems to be <code>Shift</code>+<code>AltGr</code>, but it maybe
on some other key depending on you keyboard layout.</p><p>In some desktops, for example in Gnome3, you can also easily choose which key to use
for Compose in the system settings. The following example video shows
how to do that in Gnome3 on Fedora 34:</p><video playsinline aria-label="Selecting the Compose key in Gnome3 on Fedora 34" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/selecting-compose-key-in-gnome3-fedora34.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>â€œDead key sequencesâ€ and â€œCompose sequencesâ€ are basically the same
thing as far as Xorg, Gtk, IBus, and Typing Booster are concerned.</p><ul><li><p>Xorg:</p><p>Displays nothing while the sequence is typed, only the final
result is displayed. Undefined sequences are silently discarded.</p></li><li><p>Gtk, IBus, Typing Booster:</p><p>Try to be more helpful and display a Compose or dead key
sequence in progress, allow fixing sequences with BackSpace, do
something more useful with undefined sequences and more â€¦</p></li></ul><p>The official <a href=https://en.wikipedia.org/wiki/File:ISOIEC-9995-7-015--ISO-7000-2021--Symbol-for-Compose-Character.svg>â€œISO keyboard symbol for &ldquo;Compose Character&rdquo;â€</a>
according to this <a href=https://en.wikipedia.org/wiki/Compose_key>Wikipedia article</a>
is â„ U+2384 COMPOSITION SYMBOL.</p><p>The compose sequence implementations in Gtk, IBus, and Typing Booster
used to display that symbol, for example when <code>compose</code> <code>~</code> was typed,
<span style=text-decoration:underline><code>â„~</code></span> was displayed
indicating the unfinished compose sequence.</p><p>Unfortunately some people found <code>â„</code> to big, wide and distracting ğŸ˜­.
Therefore, Gtk changed to display <code>compose</code> as <span style=text-decoration:underline><code>Â·</code></span> (Â· U+00B7 MIDDLE
DOT). <strong>And</strong>, a leading <span style=text-decoration:underline><code>Â·</code></span> is only displayed until the next character has
been typed, then <strong>vanishes!</strong></p><p>Examples how Gtk now displays compose and dead key sequences:</p><table><thead><tr><th>Typed compose sequence</th><th>Display</th></tr></thead><tbody><tr><td><code>compose</code></td><td><span style=text-decoration:underline><code>Â·</code></span></td></tr><tr><td><code>compose</code> <code>-</code></td><td><span style=text-decoration:underline><code>-</code></span></td></tr><tr><td><code>compose</code> <code>-</code> <code>-</code></td><td><span style=text-decoration:underline><code>--</code></span></td></tr><tr><td><code>compose</code> <code>-</code> <code>-</code> <code>-</code></td><td>â€” (sequence finished, â€” U+2014 EM DASH is displayed)</td></tr><tr><td><code>dead ~</code></td><td><span style=text-decoration:underline><code>~</code></span></td></tr><tr><td><code>dead ~</code> <code>compose</code></td><td><span style=text-decoration:underline><code>~Â·</code></span></td></tr><tr><td><code>dead ~</code> <code>compose</code> <code>b</code></td><td><span style=text-decoration:underline><code>~Â·b</code></span></td></tr><tr><td><code>dead ~</code> <code>compose</code> <code>b</code> <code>a</code></td><td>áºµ (sequence finished, áºµ LATIN SMALL LETTER A WITH BREVE AND TILDE is displayed. Yes, that sequence actually exists in <code>/usr/share/X11/locale/en_US.UTF-8/Compose</code> ğŸ˜)</td></tr></tbody></table><p>IBus and Typing Booster then also changed and followed the way Gtk
displays this to have a consistent user experience across these 3
compose sequence implementations.</p><h2 id=customizing-compose-sequences>Customizing compose sequences</h2><p>The <a href=https://www.mankier.com/5/Compose>man page for compose</a> (Also
available as <code>man compose</code> on most distributions) explains from which
file the default compose sequence definitions are read and how a user
can override it with his own compose sequence definitions.</p><p>This man page says:</p><blockquote><p>The compose file is searched for in the following order:</p><ul><li><p>If the environment variable $XCOMPOSEFILE is set, its value is used as the
name of the Compose file.</p></li><li><p>If the user&rsquo;s home directory has a file named .XCompose, it is used as the
Compose file.</p></li><li><p>The system provided compose file is used by mapping the locale to a compose
file from the list in /usr/share/X11/locale/compose.dir.</p></li></ul></blockquote><p>For example, when <code>XCOMPOSEFILE</code> is not set, <code>~/.XCompose</code> does not
exist either and the current locale is <code>cs_CZ.UTF-8</code>, then the system
default compose sequence definitions are read from
<code>/usr/share/X11/locale/cs_CZ.UTF-8/Compose</code>. When the current locale
is something like <code>xx_YY.UTF-8</code> where no
<code>/usr/share/X11/locale/xx_YY.UTF-8/Compose</code> file specific to that
locale exists, the US English one
<code>/usr/share/X11/locale/en_US.UTF-8/Compose</code> is read (These fallbacks
are defined in <code>/usr/share/X11/locale/compose.dir</code>).</p><p>However, if the users home directory has a file named <code>~/.XCompose</code> or
if the environment variable <code>XCOMPOSEFILE</code> is set, <strong>only</strong> that file
is used <strong>instead</strong> of the system default.</p><p>For example, a user Compose file <code>~/.XCompose</code> could look like this:</p><pre><code># %H  expands to the user's home directory (the $HOME environment variable)
# %L  expands to the name of the locale specific Compose file (i.e.,
#     &quot;/usr/share/X11/locale/&lt;localename&gt;/Compose&quot;)
# %S  expands to the name of the system directory for Compose files (i.e.,
#     &quot;/usr/share/X11/locale&quot;)

include &quot;/%L&quot;  # The leading / is to make Gtk load the system compose file!

&lt;Multi_key&gt; &lt;underscore&gt; &lt;period&gt; &lt;e&gt; : &quot;Ä—Ì„&quot; # U+0117 LATIN SMALL LETTER E WITH DOT ABOVE U+0304 COMBINING MACRON
&lt;Multi_key&gt; &lt;m&gt; &lt;o&gt; &lt;n&gt; &lt;k&gt; &lt;e&gt; &lt;y&gt; &lt;s&gt; : &quot;ğŸ™ˆğŸ™‰ğŸ™Š&quot;
&lt;Multi_key&gt; &lt;m&gt; &lt;o&gt; &lt;u&gt; &lt;s&gt; &lt;e&gt; : &quot;ğŸ&quot; # U+1F401 MOUSE
&lt;Multi_key&gt; &lt;m&gt; &lt;o&gt; &lt;u&gt; &lt;s&gt; &lt;e&gt; : &quot;ğŸ­&quot; # U+1F42D MOUSE FACE
# In en_US.UTF-8 locale, the system compose file
# /usr/share/X11/locale/&lt;localename&gt;/Compose included above contains
#     &lt;Multi_key&gt; &lt;p&gt; &lt;o&gt; &lt;o&gt;                 : &quot;ğŸ’©&quot;  U1F4A9 # PILE OF POO
# One can remove unwanted compose sequences by re-defining them with
# an empty result:
&lt;Multi_key&gt; &lt;p&gt; &lt;o&gt; &lt;o&gt; : &quot;&quot; # Remove unwanted compose sequence
</code></pre><p>The <code>include "/%L"</code> includes the system compose file for the current locale,
the lines below add user defined sequences. If an identical sequence
are defined again with a different result, the last definition â€œwinsâ€.
I.e. of the two lines defining <code>&lt;Multi_key> &lt;m> &lt;o> &lt;u> &lt;s> &lt;e></code>,
the second line overrides the first one.</p><p>As the user definitions are all <strong>below</strong> the <code>include "/%L"</code> which
reads the system default, the user definitions override any system
default sequences in case there is a conflict.</p><p>If the <code>include "/%L"</code> were not there in <code>~/.XCompose</code>, <strong>only</strong> the
user definitions in <code>~/.XCompose</code> would be available!</p><p>ğŸ’¡ <strong>Tiny extensions of the syntax described in <a href=https://www.mankier.com/5/Compose>man page for compose</a></strong>:</p><ul><li><p>Gtk and Typing Booster</p><p>Both Gtk and Typing Booster make it possible to remove unwanted
compose sequences by re-defining them as sequences with an empty result
like:</p><p><code>&lt;Multi_key> &lt;p> &lt;o> &lt;o> : ""</code></p><p>That does <strong>not</strong> mean that this sequence still exists and just
produces an empty result, the effect is as if the
sequence <code>&lt;Multi_key> &lt;p> &lt;o> &lt;o></code> had not been defined at all.</p></li><li><p>Only Gtk</p><p>The <code>include "%L"</code> statement in Gtk has the special meaning to include
the <strong>builtin</strong> compose sequences of Gtk. It does <strong>not</strong> include
the system compose file <code>/usr/share/X11/locale/&lt;localename>/Compose</code>.
If you use the compose support in Gtk and want to use the locale specific
system compose file, you can use <code>include "/%L"</code>. The leading <code>/</code> forces
loading the locale specific system compose file.
For the compose support in Typing Booster and IBus, the leading <code>/</code> makes
no difference.</p></li></ul><h2 id=special-compose-features-in-typing-booster>Special â€œComposeâ€ features in Typing Booster</h2><p>This section explains some details about the â€œComposeâ€ implementation
in Typing Booster which are a bit special.</p><h3 id=why-own-compose-implementation>Why Typing Booster has its own â€œComposeâ€ implementation</h3><p>Typing Booster needed its own implementation of compose sequences
because it needs full control about such compose sequences <strong>inside</strong>
an already open preÃ«dit.</p><p>For example, if one wants to type the German word â€œgrÃ¼nâ€ and starts
typing â€œgrâ€, there is a preÃ«dit displayed as</p><p><span style=text-decoration:underline><code>gr|</code></span></p><p>where <span style=text-decoration:underline><code>|</code></span> indicates the cursor
position. Typing Booster then searches for completions. When a compose
sequence like <code>compose</code> <code>"</code> <code>u</code> is typed in this situation to get an
â€œÃ¼â€, the current preÃ«dit must not be committed, but the compose
actually needs to add to the preÃ«dit. That means a kind of preÃ«dit
inside the preÃ«dit is needed. While that compose sequence is typed it
displays:</p><p><span style=text-decoration:underline><code>grÂ·|</code></span>
<span style=text-decoration:underline><code>gr"|</code></span>
<span style=text-decoration:underline><code>grÃ¼|</code></span></p><p>Now â€œgrÃ¼â€ is still in preÃ«dit and Typing Booster can continue to
search for completions of â€œgrÃ¼â€.</p><p>One could even go back with Left (arrow-left) in the preÃ«dit and
insert a compose sequence there. For example, if one types â€œgrnâ€ and
then Left, the preÃ«dit displays</p><p><span style=text-decoration:underline><code>gr|n</code></span></p><p>Typing <code>compose</code> <code>"</code> <code>u</code> then displays:</p><p><span style=text-decoration:underline><code>grÂ·|n</code></span>
<span style=text-decoration:underline><code>gr"|n</code></span>
<span style=text-decoration:underline><code>grÃ¼|n</code></span></p><p>Now â€œgrÃ¼nâ€ is in the preÃ«dit and Typing Booster can continue to search
for completions.</p><h3 id=automatic-dead-key-sequences>Automatically add â€œmissingâ€ dead key sequences</h3><p>To write the character Ä—Ì„ (U+0117 LATIN SMALL LETTER E WITH DOT ABOVE
U+0304 COMBINING MACRON) which is used for writing
<a href=https://en.wikipedia.org/wiki/Samogitian_dialect#Writing_system>Samogitian</a>
it would be perfectly natural to write <code>dead Â¯</code> <code>dead Ë™</code> <code>e</code> or <code>dead Ë™</code> <code>dead Â¯</code> <code>e</code>.</p><p>But the Compose implementations in Xorg and IBus accept only dead key
sequences which are defined in one of the Compose files read. And
there are no such dead key sequences defined in
<code>/usr/share/X11/locale/en_US.UTF-8/Compose</code>. Therefore, the Compose
implementations in Xorg and IBus currently just discard sequences like
<code>dead Â¯</code> <code>dead Ë™</code> <code>e</code> as undefined and produce no result at all.</p><p>That means to be able to write these perfectly natural and useful
dead key sequences, one would need to add something like</p><pre><code>&lt;dead_macron&gt; &lt;dead_abovedot&gt; &lt;e&gt; : &quot;Ä—Ì„ &quot; # U+0117 LATIN SMALL LETTER E WITH DOT ABOVE U+0304 COMBINING MACRON
&lt;dead_abovedot&gt; &lt;dead_macron&gt; &lt;e&gt; : &quot;Ä—Ì„ &quot; # U+0117 LATIN SMALL LETTER E WITH DOT ABOVE U+0304 COMBINING MACRON
</code></pre><p>to the users <code>~/.XCompose</code> file and/or extend the system default file
<code>/usr/share/X11/locale/en_US.UTF-8/Compose</code>.</p><p>But the character from Samogitian used as an example here is not the
only character which could be reasonably written with dead key
sequences but the sequences are missing in
<code>/usr/share/X11/locale/en_US.UTF-8/Compose</code>.</p><p>Adding all such sequences which might make sense for some language
somewhere in the world would be a tedious, never ending project.
Hundreds, if not thousands of sequences would need to be added.</p><p>So why not interpret <strong>any</strong> dead key sequence which seems reasonable
but is not defined in the Compose file automatically as a fallback?
I.e. if the user types something like <code>dead Â¯</code> <code>dead Ë™</code> <code>e</code> and no
definition for <code>&lt;dead_macron> &lt;dead_abovedot> &lt;e></code> is found in the
Compose file(s) read, then interpret this â€œmissingâ€ sequence
nevertheless and produce something reasonable.</p><p>Typing Booster does this, if a sequence like</p><p><code>dead first</code> <code>dead second</code> â€¦ <code>dead last</code> <code>base character</code></p><p>is typed <strong>and</strong> no definition is found in the Compose file(s),
<strong>and</strong> the Unicode category of <code>base character</code> is either â€œLl
(Letter, Lowercase)â€ or â€œLu (Letter, Uppercase)â€, then convert it into
a combining char sequence like</p><p><code>base character</code> <code>combining char last</code> â€¦ <code>combining char second</code> <code>combining char first</code></p><p>convert this combining character sequence to <a href=https://unicode.org/reports/tr15/#Norm_Forms>Normalization Form C
(NFC)</a> and use that as
the result of the undefined dead key sequence?</p><p>That is very helpful and automatically adds a huge amount of perfectly
reasonable dead key sequences which are â€œmissingâ€ in the Compose files.</p><p><strong>If</strong> a definition exists in the Compose file(s) read, this definition
has <strong>always</strong> priority, only if no definition exists this automatic
fallback is used.</p><h3 id=fallbacks-for-missing-dead-key-sequences>Fallbacks for â€œmissingâ€ keypad sequences</h3><p>From a user point of view, it should not matter whether
a character like <code>0</code>, <code>1</code>, â€¦,<code>9</code>, <code>/</code>, <code>*</code>, <code>-</code>, <code>+</code>, <code>.</code> is typed
using the â€œnormalâ€ key or the respective key on the keypad/numberpad.</p><p>But in the Xorg Compose file, some compose sequences can be typed
only using the â€œnormalâ€ key. For example:</p><pre><code>$ grep Ã˜ /usr/share/X11/locale/en_US.UTF-8/Compose
&lt;dead_stroke&gt; &lt;O&gt;                       : &quot;Ã˜&quot;   Oslash # LATIN CAPITAL LETTER O WITH STROKE
&lt;Multi_key&gt; &lt;slash&gt; &lt;O&gt;                 : &quot;Ã˜&quot;   Oslash # LATIN CAPITAL LETTER O WITH STROKE
&lt;Multi_key&gt; &lt;O&gt; &lt;slash&gt;                 : &quot;Ã˜&quot;   Oslash # LATIN CAPITAL LETTER O WITH STROKE
&lt;Multi_key&gt; &lt;KP_Divide&gt; &lt;O&gt;             : &quot;Ã˜&quot;   Oslash # LATIN CAPITAL LETTER O WITH STROKE
</code></pre><p>and:</p><pre><code>$ grep Â½ /usr/share/X11/locale/en_US.UTF-8/Compose
&lt;Multi_key&gt; &lt;1&gt; &lt;2&gt;                     : &quot;Â½&quot;   onehalf # VULGAR FRACTION ONE HALF
</code></pre><p>I.e. one can type both orders <code>&lt;Multi_key> &lt;slash> &lt;O></code> <strong>and</strong>
<code>&lt;Multi_key> &lt;O> &lt;slash></code> to get â€œÃ˜â€ but when using KP_Divide instead
of slash only the order <code>&lt;Multi_key> &lt;KP_Divide> &lt;O></code> works and
<code>&lt;Multi_key> &lt;O> &lt;KP_Divide></code> does not work because it is
undefined. From a user point of view, both â€œ<slash>â€ and â€œ&lt;KP_Divide>â€
produce a â€œ/â€, there should be no difference in behaviour. I think
that is the motivation for defining <code>&lt;Multi_key> &lt;KP_Divide> &lt;O></code> to
give the same result as <code>&lt;Multi_key> &lt;slash> &lt;O></code>, it should not
matter how the â€œ/â€ is typed. But the reverse order <code>&lt;Multi_key> &lt;O> &lt;KP_Divide></code> has apparently been â€œforgottenâ€.</p><p>It is similar when typing â€œÂ½â€ using Compose, one can type it with
<code>compose</code> <code>1</code> <code>2</code> only using the â€œnormalâ€ <code>1</code> and <code>2</code> keys but not
using those on the keypad.</p><p>This doesnâ€™t really make sense and I tried to make a <a href=https://gitlab.freedesktop.org/xorg/lib/libx11/-/merge_requests/82>merge
request</a>
for libX11 upstream to add the apparently missing definitions. But
this is a quite tedious undertaking, although my merge request tries
to add 246 â€œmissingâ€ definitions and I tried to find all missing
sequences, I still forgot to add a few sequences like the alternatives
to <code>&lt;Multi_key> &lt;1> &lt;2></code> using the keypad keys like <code>&lt;Multi_key> &lt;KP_1> &lt;KP_2></code>, <code>&lt;Multi_key> &lt;KP_1> &lt;2></code>, <code>&lt;Multi_key> &lt;1> &lt;KP_2></code>.</p><p>So I added an automatic fallback to Typing Booster which works like this:</p><p>If something like <code>&lt;Multi_key> &lt;KP_1></code> is typed and no sequence
starting like that is defined, try whether sequences starting with
<code>&lt;Multi_key> &lt;1></code> can be found, if yes replace <code>&lt;KP_1></code> with <code>&lt;1></code> and
continue to interpret the sequence.</p><p>And the other way round: if something like <code>&lt;Multi_key> &lt;1></code> is typed
and no sequence starting like that is defined, try whether sequences
starting with <code>&lt;Multi_key> &lt;KP_1></code> can be found, if yes replace <code>&lt;1></code>
with <code>&lt;KP_1></code> and continue to interpret the sequence.</p><p>My current implementation of these fallbacks does still make a
difference between typing <code>&lt;Multi_key> &lt;KP_Divide></code> and <code>&lt;Multi_key> &lt;slash></code> for example, because sequences starting <strong>both</strong> ways do
actually exist in the Compose file, but the number of possible
continuations is different. <code>&lt;Multi_key> &lt;slash></code> can be completed in
38 different ways but <code>&lt;Multi_key> &lt;KP_Divide></code> can be completed only
in 27 different ways:</p><pre><code>$ grep '^&lt;Multi_key&gt; &lt;slash&gt;' /usr/share/X11/locale/en_US.UTF-8/Compose | wc --lines
38
$ grep '^&lt;Multi_key&gt; &lt;KP_Divide&gt;' /usr/share/X11/locale/en_US.UTF-8/Compose | wc --lines
27
</code></pre><p>I.e. when typing <code>&lt;Multi_key> &lt;KP_Divide></code>, Typing Booster currently does not
attempt to replace <code>&lt;KP_Divide></code> with <code>&lt;slash></code> because
sequences starting with <code>&lt;Multi_key> &lt;KP_Divide></code> actually are defined!
So there are sometimes still subtle diffences between using the â€œnormalâ€
and the keypad keys, typing <code>&lt;Multi_key> &lt;KP_Divide></code> offers fewer
possibilities than typing <code>&lt;Multi_key> &lt;slash></code> does.</p><p>Of course Typing Booster could easily treat â€œnormalâ€ and keypad keys
as 100% identical <strong>always</strong> in compose sequences. I did not do that
because I wanted to keep the possibility to define <strong>really
different</strong> results for sequences involving the â€œnormalâ€ versus the
keypad keys.</p><p>For example, with my current implementation, it is still possible to
possible to define something like this</p><pre><code>&lt;Multi_key&gt; &lt;1&gt; &lt;2&gt;                     : &quot;Â½&quot;
&lt;Multi_key&gt; &lt;KP_1&gt; &lt;KP_2&gt;               : &quot;1ï¸âƒ£2ï¸âƒ£&quot;
</code></pre><p>i.e. to define different results for a sequence using the â€œnormalâ€
keys and for the similar sequence using the keypad keys. Seems a bit
crazy to me, I cannot imagine why somebody would want to define
something like that, but there might be reasons for wanting to make
such differences and I didnâ€™t want to take away that possibility.</p><p>Just as in <a href=#automatic-dead-key-sequences>Automatically add â€œmissingâ€ dead key sequences</a>,
<strong>if</strong> a definition exists in the Compose file(s) read, this
definition has <strong>always</strong> priority, only if no definition exists
Typing Booster tries to be helpful and offers a reasonable fallback.</p><h3 id=handling-of-undefined-sequences>How undefined sequences are handled</h3><p>When an undefined compose or dead key sequence is typed using
Xorg/libX11, the result is nothing at all, the sequence is just
silently discarded. This can be tested by using xterm like this:</p><pre><code>$ env XMODIFIERS=@im=none xterm
</code></pre><p>Setting <code>XMODIFIERS</code> to <code>@im=none</code> disables input methods like ibus,
i.e. this makes sure that the Compose implementation in Xorg/libX11 is
used.</p><p>IBus 1.5.24 does the same as Xorg when an undefined compose sequence
is typed, nothing happens, the sequence is silently discarded. To
test the Compose implementation in IBus, make sure that the
<code>ibus-daemon</code> is running, configure a keyboard layout with the needed
dead keys in <code>ibus-setup</code>, then switch to that keyboard layout and
test for example in <code>gedit</code>.</p><p>Gtk3 tries to be more helpful and instead of silently discarding the sequence
do something more useful.
The Compose implementation in Gtk3 can be tested by using <code>gedit</code> like this:</p><pre><code>$ env GTK_IM_MODULE=gtk-im-context-simple gedit
</code></pre><p>Typing Booster also tries to be more helpful and do something more useful
than just discarding the undefined sequence.</p><p>This table shows some examples for undefined compose sequences and
what the result is when typing the sequence in the 4 different
compose implementations:</p><table><thead><tr><th>Undefined compose sequence</th><th>Xorg (libX11 1.7.2)</th><th>IBus 1.5.24</th><th>Gtk3 3.24.30</th><th>Typing Booster 2.14.4</th></tr></thead><tbody><tr><td><code>dead_circumflex</code> <code>@</code></td><td>nothing</td><td>nothing</td><td>^@</td><td><span style=text-decoration:underline>^</span><br>(keep <code>dead_circumflex</code> in preÃ«dit and beep)</td></tr><tr><td><code>dead_circumflex</code> <code>x</code></td><td>nothing</td><td>nothing</td><td>^x</td><td>xÌ‚<br>(x + Â Ì‚ U+0302 COMBINING CIRCUMFLEX ACCENT)<br>(Because of <a href=#automatic-dead-key-sequences>automatic dead key fallback</a>)</td></tr><tr><td><code>dead_macron</code> <code>dead_abovedot</code> <code>e</code></td><td>nothing</td><td>nothing</td><td>Â¯ Ì‡e</td><td>Ä—Ì„<br>(Ä— U+0117 LATIN SMALL LETTER E WITH DOT ABOVE + Â Ì„ U+0304 COMBINING MACRON)<br>(Because of <a href=#automatic-dead-key-sequences>automatic dead key fallback</a>)</td></tr><tr><td><code>compose</code> <code>-</code> <code>-</code> <code>x</code></td><td>nothing</td><td>nothing</td><td>nothing</td><td><span style=text-decoration:underline>&ndash;</span><br>(keep <code>compose</code> <code>-</code> <code>-</code> in preÃ«dit and beep)</td></tr><tr><td><code>compose</code> <code>KP_1</code> <code>KP_2</code></td><td>2<br>(<code>compose</code> <code>KP_1</code> produces nothing, then <code>KP_2</code> produces â€œ2â€)</td><td>2<br>(<code>compose</code> <code>KP_1</code> produces nothing, then <code>KP_2</code> produces â€œ2â€)</td><td>2<br>(<code>compose</code> <code>KP_1</code> produces nothing, then <code>KP_2</code> produces â€œ2â€)</td><td>Â½<br>(Because of <a href=#fallbacks-for-missing-dead-key-sequences>fallback for â€œmissingâ€ keypad sequences</a> it falls back to the defined sequence <code>compose</code> <code>1</code> <code>2</code>)</td></tr></tbody></table><p>The behaviour of Typing Booster for undefined compose sequences is:</p><ul><li>try <a href=#automatic-dead-key-sequences>automatic dead key fallback</a></li><li>try <a href=#fallbacks-for-missing-dead-key-sequences>fallback for â€œmissingâ€ keypad sequences</a></li></ul><p>If that didnâ€™t help, discard only the key which made the sequence
invalid, keep the valid part of the sequence in preÃ«dit, and play an
error beep.</p><p>When hearing the error beep, the user can then type Tab to <a href=#show-compose-completions>show how
the sequence could be completed</a>.</p><h3 id=show-compose-completions>Show possible completions of compose sequences</h3><video playsinline aria-label="Show possible completions of compose sequences" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/show-possible-completions-of-compose-sequences.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This video shows how possible completions of partially typed compose
sequences can be displayed by typing a key bound to the command
â€œenable_lookupâ€ (by default that is [&lsquo;Tab&rsquo;, &lsquo;ISO_Left_Tab&rsquo;]).</p><p>First the keyboard layout â€œEnglish (US, euro on 5)â€ is selected, then
â€œTyping Boosterâ€ (Typing Booster always uses the keyboard layout which
was used last before switching to Typing Booster!).</p><p>Then <code>compose</code> <code>-</code> is typed.</p><p>(Look <a href=#the-compose-key>here</a> for details about what the compose key is and to see a video showing
how to choose a compose key in Gnome3).</p><p>The compose sequence <code>compose</code> <code>-</code> is not complete yet.
Now Tab is typed and a candidate list pops up showing how this incomplete
compose sequence could be completed. There are 29 possible completions.
For example, in the first page of possible completions one can see:</p><pre><code>(1/29)
1 â      ~       U+007E tilde
2 (     {       U+007B left curly bracket
3 )     }       U+007D right curly bracket
4 +     Â±       U+00B1 plus-minus sign
5 ,     Â¬       U+00AC not sign
6 /     âŒ¿       U+233F apl functional symbol slash bar
7 :     Ã·       U+00F7 division sign
8 &gt;     â†’       U+2192 rightwards arrow
9 A     Ä€       U+0100 latin capital letter a with macron
</code></pre><p>The first column after the numbers of the candidates show the keys
which could be typed to continue the compose sequence, the second
column shows what the result would be and the third column shows
detailed Unicode information about that result.</p><p>So candidate number 4 tells us, that typing <code>compose</code> <code>-</code> <code>+</code> would
produce a â€œÂ±â€.</p><p>One can of course select a candidate as always from such a candidate
list. Or cancel the candidate list by typing Escape and continue
typing.</p><p>If something was selected already in the candidate list, indicated by
the a blue background in Gnome3, the first Escape just cancels that
selection, the second Escape then closes the candidate list. If
nothing is selected, Escape closes the candidate list
immediately. Continuing to type the compose sequence while nothing is
selected in the candidate list, also closes the candidate list.</p><p>Next, in the video, the Page_Down and Page_Up keys are used
to scroll through the candidate list and see what is available
as completion for the unfinished compose sequence <code>compose</code> <code>-</code>.</p><p>Then, Escape is typed to cancel the selection and another <code>-</code> is typed.
Now we have the still unfinished compose sequence <code>compose</code> <code>-</code> <code>-</code>.</p><p>Another Tab brings up a list of possible completions for this unfinished sequence.</p><pre><code>(1/3)
1 â      Â­       U+00AD soft hyphen
2 -     â€”       U+2014 em dash
3 .     â€“       U+2013 en dash
</code></pre><p>So typing the complete sequences <code>compose</code> <code>-</code> <code>-</code> <code>space</code> would give the â€œsoft hyphenâ€,
<code>compose</code> <code>-</code> <code>-</code> <code>-</code> the â€œem dashâ€, <code>compose</code> <code>-</code> <code>-</code> <code>.</code> the â€œen dashâ€.</p><p>In the video, candidate number 2, the â€œem dashâ€ is selected with the mouse.</p><p>Next <code>compose</code> <code>'</code> is typed followed by Tab. We see that there are 68 possible completions.
In the video Page_Down and Page_Up are used again to scroll through the completions,
then the selection is cancelled with Escape, then an <code>A</code> is typed to
complete the compose sequence: <code>compose</code> <code>'</code> <code>A</code> gives â€œÃâ€.</p><p>Next, in the video, the Greek keyboard layout is chosen in the Gnome
panel, then â€œTyping Boosterâ€ is chosen again. Typing Booster now uses
a Greek keyboard layout because that was the last active one.</p><p>Again <code>compose</code> <code>'</code> is typed and then Tab to show the possible completions of the
unfinished compose sequence.</p><p>Now we have 154 possible completions, much more than the 68 when we
were using the â€œEnglish (US, euro on 5)â€ layout! Why is that?
To avoid always showing many hundreds of completions, Typing Booster
shows only those which are actually possible to type on the current
keyboard layout. If the current keyboard layout does not have a certain
key, completions involving that key are not shown.</p><p>Scrolling down to one of the last pages of candidates shows:</p><pre><code>(127/154)
â€¦
8 ğŸ’€á¾¿Î±  á¼„       U+1F04 greek small letter alpha with psili and oxia
â€¦
</code></pre><p>I.e. it is possible to type a â€œá¼„â€ (U+1F04 GREEK SMALL LETTER ALPHA WITH PSILI AND OXIA)
by typing <code>compose</code> <code>'</code> <code>ğŸ’€á¾¿</code> <code>Î±</code>.</p><p>The <code>ğŸ’€á¾¿</code> indicates a â€œdead psiliâ€. Some keyboard layouts have both a
dead version of a key <strong>and</strong> also the non-dead version of a key. For
example a layout may have a â€œtildeâ€ <strong>and</strong> also a â€œdead tildeâ€ key.
It is necessary to distinguish that and press the correct key, either
the dead or non-dead key while typing a compose sequence. Therefore,
the candidates showing the possible compose completions make that
distiction by showing dead keys with a <code>ğŸ’€</code> prefix. I.e. <code>~</code> is a
normal tilde, <code>ğŸ’€~</code> is a â€œdeadâ€ tilde.</p><p>While the â€œEnglish (US, euro on 5)â€ was used, <code>ğŸ’€á¾¿</code> <code>Î±</code> was not shown
as a possible completion for <code>compose</code> <code>'</code> because that keyboard
layout neither has the dead psili nor the â€œÎ±â€.</p><p>Finally, in the video, that candidate number 8, â€œá¼„â€ is selected using
the mouse.</p><h4 id=a-peculiarity-of-gnome3-and-compose-completions>A peculiarity of Gnome3 and compose completions</h4><p>This chapter is specific to Gnome3, as far as I know none of the other
desktops does this weird grouping of keyboard layouts in groups of 3.</p><p>You may have noticed that there were more than 2 keyboard layouts in the Gnome panel.
The Gnome panel showed:</p><table><thead><tr><th>Input source name</th><th>indicator</th><th>comment</th></tr></thead><tbody><tr><td>English (US, euro on 5)</td><td>enâ‚</td><td>keyboard layout</td></tr><tr><td>Other (Typing Booster)</td><td>ğŸš€</td><td>input engine</td></tr><tr><td>Japanese (Anthy)</td><td>ã‚</td><td>input engine</td></tr><tr><td>English (India, with rupee)</td><td>enâ‚‚</td><td>keyboard layout</td></tr><tr><td>English (US)</td><td>enâ‚ƒ</td><td>keyboard layout</td></tr><tr><td>Greek</td><td>gr</td><td>keyboard layout</td></tr></tbody></table><p>So there were 4 keyboard layouts and 2 input engines.
The first 3 keyboard layouts were all minor variations of
the â€œEnglish (US) layoutâ€, they differ very little in which keys are available.</p><p>The Greek layout is then the 4th layout. Gnome3 groups layouts into
groups of 3, i.e. the first group of layouts contains the 3 US English
layouts, the second group only the Greek layout.</p><p>This grouping of keyboard layouts in Gnome3 has the side effect that
calling the function <code>Gdk.Keymap.get_for_display(display)</code> to find out
which keys are available on the current layout returns all keys
available in the current <strong>group</strong> of 3 layouts!</p><p>I.e. when â€œEnglish (US, euro on 5)â€ is selected, the list of keys used
to figure out which compose sequences are possible to type with the
current layout are actually the combined lists of keys of â€œEnglish
(US, euro on 5)â€ <strong>and</strong> â€œEnglish (India, with rupee)â€ <strong>and</strong>
â€œEnglish (US)â€. Which is not a much bigger list of keys than any of
these US English layouts on its own as the differences between these 3
layouts are very small. I did choose 3 almost identical layouts in
the first group of 3 on purpose to be able to demonstrate in the video
in the previous section how showing the compose completions is limited
to the current layout.</p><p>If I had use a setup with only these input sources:</p><table><thead><tr><th>Input source name</th><th>indicator</th><th>comment</th></tr></thead><tbody><tr><td>English (US, euro on 5)</td><td>en</td><td>keyboard layout</td></tr><tr><td>Other (Typing Booster)</td><td>ğŸš€</td><td>input engine</td></tr><tr><td>Japanese (Anthy)</td><td>ã‚</td><td>input engine</td></tr><tr><td>Greek</td><td>gr</td><td>keyboard layout</td></tr></tbody></table><p>both â€œEnglish (US, euro on 5)â€ and â€œGreekâ€ would have been in the
first group of 3 keyboard layouts and no matter whether the â€œEnglish
(US, euro on 5)â€ or the â€œGreekâ€ was active, the possible compose
completions shown would have always included all keys from both the
English and the Greek layout!</p><h3 id=optional-colour-for-compose-preedit>Optional colour for the compose preÃ«dit</h3><video playsinline aria-label="Optional colour for the compose preÃ«dit" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/optional-color-for-the-compose-preedit.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>The video shows how a different colour can be chosen for the compose part of the preÃ«dit.</p><p>First the option â€œâ˜ Use color for compose previewâ€ is switched off.</p><p>Then â€œsurâ€ is typed and then two times Left to move the cursor back behind
the â€œsâ€. Then <code>compose</code> <code>o</code> <code>e</code> is typed which produces an â€œÅ“â€ to turn this
into the French word â€œsÅ“urâ€. While typing this, the preÃ«dit changes as follows:</p><p>â€œsâ€ â†’ â€œsuâ€ â†’ â€œsurâ€ â†’ â€œsÂ·urâ€ â†’ â€œsourâ€ â†’ â€œsÅ“urâ€</p><p>Then the option â€œâ˜‘ï¸ Use color for compose previewâ€ is switch on again
and the same typing is repeated. Now the preÃ«dit changes as follows:</p><p>â€œsâ€ â†’ â€œsuâ€ â†’ â€œsurâ€
â†’ â€œs<span style=color:#58ff33>Â·</span>urâ€
â†’ â€œs<span style=color:#58ff33>o</span>urâ€
â†’ â€œsÅ“urâ€</p><p>Without the colouring of the compose part of the preÃ«dit, it is hard to see
that â€œsourâ€ actually still contains an unfinished compose sequence, <strong>especially</strong>
because the Â· (U+00B7 MIDDLE DOT) representing the <code>compose</code> key has vanished.</p><p>Using colour in the compose part of the preÃ«dit makes it much more obvious
which part of the preÃ«dit was already there before the compose sequence was
started and which part is an unfinished compose sequence.</p><h1 id=unicode-symbols-and-emoji-predictions>Unicode symbols and emoji predictions</h1><p>ibus-typing-booster supports prediction of emoji and Unicode symbols as well (actually almost all Unicode characters except letters can be typed this way). This can be enabled or disabled with the option â€œEmoji predictionsâ€ in the setup tool which is on by default.</p><p>To make all emoji display correctly, you need good fonts which contain all emoji, see Emoji fonts for details about available fonts and font setup.</p><h2 id=emoji-input>Emoji input</h2><video playsinline aria-label="Typing Emoji in English with Emoji option on" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/emoji-english-emoji-option-on.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>When the â€œâ˜‘ï¸ Unicode symbols and emoji predictionsâ€ option is on (it is
off by default), you get emoji displayed in the candidate list
automatically when typing something which matches an emoji.</p><p>For example in this video, the user has types â€œcamelâ€, â€œAlbaniaâ€, and
â€œcastleâ€ and suitable emoji are shown in the candidate list.</p><p>If reasonable matches for emoji are found, the first match is shown as
the last candidate of the first page of the candidate list (Unless, as
in the case of â€œAlbaniaâ€, the candidate list has only one page, then
it might not be the last candidate).</p><p>If more than one emoji has matched the input and the candidate list
has more than one page, the other matches can be found by scrolling
down to the next page of candidates. If an emoji is selected and
committed, it will be remembered just like ibus-typing-booster
remembers other words and will be shown with higher priority next
time.</p><p>As having the â€œâ˜‘ï¸ Unicode symbols and emoji predictionsâ€ option enabled
slows down the search for predictions, you might want to look
at <a href=#quickly-toggling-emoji-mode>Quickly toggling emoji mode on and off</a>, especially if you
use emoji only occasionally.</p><h2 id=emoji-input-fuzzy-matching>Emoji input fuzzy matching</h2><video playsinline aria-label="Emoji input fuzzy matching" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/emoji-english-fuzzy-castle.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>Fuzzy emoji matching using the Enchant spellchecker has been removed
from ibus-typing-booster â‰¥ 2.27.52, as it caused more problems than it
solved. For example, searching for Syriac characters by typing
&ldquo;syriac&rdquo; incorrectly matched the ğŸ’‰ (U+1F489 SYRINGE) emoji with the
highest score.</p><p>While the new emoji search no longer performs spellchecking, it works
significantly better than beforeâ€”especially with multiple search terms
that rely on substring matches. For instance, even though &ldquo;casle&rdquo; no
longer yields results, a short substring like &ldquo;cas&rdquo; is now sufficient
to match a castle emoji.</p><p>Additionally, to find a specific castle emoji, users can now combine
multiple short substrings with underscores or spaces. For example:</p><ul><li><p>The search term &ldquo;cas_eur&rdquo; matches ğŸ° (U+1F3F0 EUROPEAN CASTLE).</p></li><li><p>The search term &ldquo;cas_jap&rdquo; matches ğŸ¯ (U+1F3EF JAPANESE CASTLE).</p></li></ul><p>(The old search struggled with such short partial matches.)</p><p>On top of these improvements, the new emoji search algorithm is much faster.</p><p>If users cannot find a desired emoji or character due to misspelled
names or keywords, they can still use <code>emoji-picker --spellcheck</code>. By
default, <code>emoji-picker</code> no longer uses spellchecking either, but the old
spellcheck-based search remains available as an option.</p><p>I chose not to add the old spellchecking search to Typing Booster as I
found it largely ineffective.</p><h2 id=emoji-input-multiple-keywords>Emoji input using multiple keywords</h2><video playsinline aria-label="Emoji input using multiple keywords" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/emoji-english-multiple-keywords-castle-japanese.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This video shows how to use multiple keywords to search for emoji.</p><p>If typing a single word does not give you the emoji you are looking
for, you can type as many keywords as you like and concatenate them
with underscores â€œ_â€ (Or spaces â€œ â€. Typing space usually commits the
preÃ«dit, but you can insert literal spaces into the preÃ«dit by typing
AltGr+Space).</p><p>In a previous example, typing â€œcastleâ€ gave us the match ğŸ° (U+1F3F0
EUROPEAN CASTLE). If this is not what we wanted we can type
â€œcastle_japaneseâ€ (or â€œjapanese_castleâ€) to get ğŸ¯ (U+1F3EF JAPANESE
CASTLE).</p><h2 id=lookup-related-emoji>Looking up related emoji</h2><video playsinline aria-label="Looking up related emoji" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/related-emoji.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>It is also possible to look up related emoji which may not have
matched the typed text well but are related to the emoji shown because
they share keywords or categories.</p><p>To show related emoji, click an emoji shown in the candidate list with
the right mouse button (see <a href=#mouse-bindings>Mouse bindings</a>).</p><p>Or, if you prefer to use a key binding instead of the mouse: select an
emoji in the candidate list by moving up or down in the candidate list
using the arrow-up/arrow-down keys or the page-up/page-down keys until
the desired emoji is highlighted, then press AltGr+F12.</p><p>AltGr+F12 is the default key binding for the command
â€œlookup_relatedâ€. If you press this while no candidate is selected, a
lookup of related stuff for the preÃ«dit is tried. In this case, the
preÃ«dit contains the text â€œlizâ€ which is not an emoji. So no
related emoji will be found. But if NLTK is used, related words for
â€œlizâ€ may be shown, see <a href=#nltk-related-words>Using NLTK to find related words</a>.</p><p>As seen in the screen shot, looking up related emoji for the â€œlizardâ€
gives us emoji for other types of reptiles and related animals. By
typing the â€œEscapeâ€ key, one can go back to the original list.</p><h2 id=multilingual-emoji-input>Multilingual emoji input</h2><h3 id=emoji-input-german-english>Emoji input using German and English</h3><video playsinline aria-label="Emoji input using German and English" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/emoji-german-english.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>In this example video, Typing Booster is used with dictionaries setup for British English
and German in the setup tool.</p><p>Therefore, one can use both the English word â€œcastleâ€ or the German
word for castle â€œSchlossâ€ to find castle emoji.</p><p>The German word â€œSchlossâ€ means â€œcastleâ€ but also â€œlockâ€. Therefore,
typing â€œSchlossâ€ not only matches ğŸ° (U+1F3F0 EUROPEAN CASTLE) and ğŸ¯
(U+1F3EF JAPANESE CASTLE but also ğŸ”“ (U+1F513 OPEN LOCK) and other
lock emoji.</p><h3 id=emoji-input-hindi-english>Emoji input using Hindi and English</h3><video playsinline aria-label="Emoji input using Hindi and English" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/emoji-hindi-english.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This example video shows using Hindi and English to lookup emoji.</p><p>Both languages are configured in the setup tool (See: <a href=#basic-setup-for-your-language>Basic setup for
your language</a>)</p><p>First â€œnamasteâ€ is typed. The transliteration method â€œhi-itransâ€
transliterates this to â€œà¤¨à¤®à¤¸à¥à¤¤à¥‡â€ which is shown in the preÃ«dit because
the â€œhi-itransâ€ input method is at the highest priority (For details
about multilingual input and how to switch the script shown in the
preÃ«dit, see <a href=#multilingual-input>Multilingual input</a>).</p><p>Both â€œnamasteâ€ and â€œà¤¨à¤®à¤¸à¥à¤¤à¥‡â€ are then used to search for matching words
and emoji. Only â€œà¤¨à¤®à¤¸à¥à¤¤à¥‡â€ matches an emoji which can be seen in the
candidate list (ğŸ™ U+1F64F PERSON WITH FOLDED HANDS and skin tone
variants of this emoji).</p><p>Second, â€œfolded_handsâ€ is typed. As the highest priority input method
is still â€œhi-itransâ€, this is shown as nonsensical Devanagari in the
preÃ«dit. But both this nonsensical Devanagari and â€œfolded_handsâ€ are
used to find matches and â€œfolded_handsâ€ finds ğŸ™ and skin tone
variants as well.</p><p>Typing Control+Down then changes the priority of the input methods and
puts â€œNoIMEâ€ on top which reveals that â€œfolded_handsâ€ was actually
typed as this is now shown in the preÃ«dit.</p><h3 id=emoji-input-japanese>Emoji input using Japanese</h3><video playsinline aria-label="Emoji input using Japanese" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/emoji-japanese.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This video shows that emoji can be searched using Japanese keywords as
well.</p><p>To be able to input emoji using their Japanese names, one first needs
to install the packages <code>m17n-db-extras</code>, <code>m17n-lib-anthy</code> and <code>anthy</code>
on Fedora. On Fedora 36 one can do this using the command:</p><p><code>sudo dnf install m17n-db-extras m17n-lib-anthy</code></p><p>This should work on other distributions as well, but the package names
may be different. You need the package which contains the
<code>/usr/share/m17n/ja-anthy.mim</code> file and other packages which are
required to make the ja-anthy input method of the m17n library work.</p><p>Then one needs to add the â€œja-anthyâ€ input method and the Japanese
dictionary (â€œja_JPâ€) to the setup of ibus typing booster. For details
how to add input methods and dictionaries see <a href=#basic-setup-for-your-language>Basic setup for your
language</a>.</p><p>Now one can type emoji keywords using Japanese. For example when
typing â€œkatasumuriâ€ (which means â€œsnailâ€), one gets the emoji ğŸŒ
(U+1F40C SNAIL) listed as a candidate.</p><p>It is labelled in the candidate list in Japanese hiragana syllables,
i.e. â€œã‹ãŸã¤ã‚€ã‚Šâ€. The Latin â€œkatatsumuriâ€ was transliterated by the
ja-anthy input method to â€œã‹ãŸã¤ã‚€ã‚Šâ€ and this was then looked up in
the dictionaries. The Latin text â€œkatatsumuriâ€ was of course looked up
as well but of course produced no match.</p><p>Switching the priority of the input methods with â€œControl+Downâ€ or
â€œControl+Upâ€ toogles the display of the preedit between Latin letters
â€œkatatsumuriâ€ (when â€œNoIMEâ€ has highest priority) and Hiragana letters
â€œã‹ãŸã¤ã‚€ã‚Šâ€ (when â€œja-anthyâ€ has highest priority). This makes no
difference for the matches, still both â€œkatatsumuriâ€ and â€œã‹ãŸã¤ã‚€ã‚Šâ€
are looked up in the dictionaries. Only when committing the preÃ«dit
now by typing a space, it would matter because it would commit the
Hiragana â€œã‹ãŸã¤ã‚€ã‚Šâ€ or the Latin â€œkatatsumuriâ€ as seen in the moment
when the space is typed.</p><p>Near the end of the video, a right click with the mouse on the snail
in the candidate list shows related emoji. These related emoji are
labelled with English names because the British English dictionary has
highest priority in the setup tool. When the Japanese dictionary had
the highest priority in the setup tool, the related emoji would be
shown with their Japanese names.</p><h3 id=emoji-input-japanese-chinese-phonetics>Emoji input using Japanese or Chinese phonetics</h3><p>The chapter <a href=#emoji-input-japanese>Emoji input using Japanese</a> described how one
can search for emoji using the Japanese input method â€œja-anthyâ€. But
this has a few disadvantages:</p><ul><li>the packages containing â€œja-anthyâ€ may be missing on your distribution</li><li>One can only type hiragana easily using â€œja-anthyâ€ in Typing Booster.</li></ul><p>âš ï¸ <strong>Sidenote</strong>: It is not completely impossible to convert hiragana to
kanji with â€œja-anthyâ€ in Typing Booster. But I donâ€™t want to describe
how to do this in detail here because it is very difficult and not really
useful in practice.</p><p>When it is not easy to type katakana or kanji, some emoji which have names
or keywords in katakana or kanji can not be found easily.</p><p>For example the snail emoji in Japanese has the keywords:</p><blockquote><p>ğŸŒ ã‹ãŸã¤ã‚€ã‚Š | ã§ã‚“ã§ã‚“è™« | è™«</p></blockquote><p>It is still quite easy to find this snail emoji even if one can only
type hiragana because one of the keywords of this snail emoji is
ã‹ãŸã¤ã‚€ã‚Š which is completely in hiragana. Typing the other two keywords
ã§ã‚“ã§ã‚“è™« or è™« is already quite difficult with â€œja-anthyâ€ in Typing Booster.</p><p>But many emoji have no keywords written purely in hiragana at all,
for example the â€œwoman police officerâ€:</p><blockquote><p>ğŸ‘®â€â™€ï¸ ãŠå·¡ã‚Šã•ã‚“ | å¥³æ€§ | å¥³æ€§è­¦å¯Ÿå®˜ | è­¦å®˜ | è­¦å¯Ÿ | è­¦å¯Ÿå®˜</p></blockquote><p>The situation is very similar in Chinese, it is very hard to type Chinese
with Typing Booster.</p><p>So it would be nice if one could just enter the phonetic transcription of Japanese or
Chinese to Latin letters to search for such emoji keywords.</p><p>To make this phonetic transcription emoji search available, one can install
the Python modules â€œpykakasiâ€ for Japanese and â€œpinyinâ€ for Chinese.</p><p>These are not available as packages in Fedora 36 but they can easily
be installed using â€œpip installâ€ like this:</p><p>For Japanese:</p><pre><code>pip install --user pykakasi
</code></pre><p>For Chinese:</p><pre><code>pip install --user pinyin
</code></pre><p>If these Python modules are installed, Typing Booster and Emoji Picker
will use them automatically if Japanese or Chinese emoji dictionaries
are used.</p><p>In Japanese, the keywords for the â€œwoman police officerâ€ are then automatically expanded
to:</p><blockquote><p>ğŸ‘®â€â™€ï¸ ãŠå·¡ã‚Šã•ã‚“, ãŠã‚ãã‚Šã•ã‚“, å¥³æ€§, ã˜ã‚‡ã›ã„, å¥³æ€§è­¦å¯Ÿå®˜, ã˜ã‚‡ã›ã„ã‘ã„ã•ã¤ã‹ã‚“, è­¦å®˜, ã‘ã„ã‹ã‚“, è­¦å¯Ÿ, ã‘ã„ã•ã¤, è­¦å¯Ÿå®˜, ã‘ã„ã•ã¤ã‹ã‚“, omegurisan, josei, joseikeisatsukan, keikan, keisatsu, keisatsukan</p></blockquote><p>And in Chinese they are expanded to:</p><blockquote><p>ğŸ‘®â€â™€ï¸ å¥³, nvÌŒ, å¥³è­¦å¯Ÿ, nvÌŒjÇngchÃ¡, è­¦å®˜, jÇngguÄn, è­¦å¯Ÿ, jÇngchÃ¡</p></blockquote><p>As these expansions now contain Latin transliterations, searching emoji
via their Latin transliteration of Japanese or Chinese now works as well.</p><p>As the search is accent insensitive, it is enough to type â€œnvjingchaâ€
to find the â€œwoman police officerâ€ in Chinese, one does not need to include
the tone marks, i.e. one does not need to type â€œnvÌŒjÇngchÃ¡â€.</p><video playsinline aria-label="Emoji input using Japanese or Chinese phonetics" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/emoji-japanese-chinese-phonetics.mp4 type=video/mp4><p>Your browser does not support video.</p></video><h2 id=unicode-symbol-input>Unicode symbol input</h2><video playsinline aria-label="Unicode symbol input" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/unicode-symbol-input.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This video example shows how arbitrary Unicode symbols and characters
can be input with Typing Booster.</p><p>Using the emoji input mode of Typing Booster, one cannot only input
emoji but other Unicode symbols as well. Actually almost all Unicode
characters can be typed this way (Except most letters, because letters
can usually typed much faster directly, allowing to search for normal
letters this way would make the search needlessly slow).</p><p>In the video, first â€œintegralâ€ is typed and one gets several
mathematical characters for integrals in the candidate list and can
scroll down to the next pages for more.</p><p>If one wants to be more specific, one can also type more than one keyword
by combining keywords with â€œ_â€ (see <a href=#emoji-input-multiple-keywords>Emoji input using multiple keywords</a>).
For example one can type something like â€œvolume_integralâ€ to get more specific matches
for integral signs related to volume integrals.</p><p>Next â€œpop_direcâ€ is typed which matches U+202C POP DIRECTIONAL
FORMATTING and U+2069 POP DIRECTIONAL ISOLATE. These are invisible
formatting characters used in scripts which use right-to-left
direction, for example in Arabic script.</p><p>Finally â€œradical_turtleâ€ is typed which finds the CJK radicals for
â€œturtleâ€.</p><p>Anything in Unicode except normal letters is possible.</p><h2 id=unicode-code-point-input>Unicode code point input</h2><video playsinline aria-label="Unicode code point input" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/unicode-code-point-input.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This example video shows how the â€œâ˜‘ï¸ Unicode symbols and emoji
predictionsâ€ feature of Typing Booster can also be used to input
characters using their Unicode code point.</p><p>As Unicode code points are hexadecimal numbers, it is first necessary
to make it possible to input digits at all into the preÃ«dit. By
default, both the digits on the regular keyboard layout <strong>and</strong> the
digits on the keypad are bound to commands committing candidates. See
<a href=#customizing-key-bindings-using-digits>Customizing key bindings using digits</a> about changing that.</p><p>The video shows the key bindings tab of the setup tool and one can see
that there are no KP_1 â€¦ KP_9 keys used in the commands to commit
candidates. So the keypad with NumLock on can be used to type digits
into the preÃ«dit.</p><p>First â€œ100â€ is typed in the video. It matches ğŸ’¯ U+1F4AF HUNDRED
POINTS SYMBOL which is an emoji which has been matched because of its
alternative name â€œ100â€ <strong>and</strong> Ä€ U+0100 LATIN CAPITAL LETTER A WITH
MACRON which has been matched because it has the Unicode code point
100 (hexadecimal). It is quite rare that typing a Unicode code point
matches an emoji as well. There will never be many candidates when
typing Unicode code points.</p><p>Then â€œ2019â€ is typed which matches â€™ U+2019 RIGHT SINGLE QUOTATION MARK.</p><p>Then â€œ20B9â€ is typed which matches â‚¹ U+20B9 INDIAN RUPEE SIGN.</p><h2 id=quickly-toggling-emoji-mode>Quickly toggling emoji mode on and off</h2><video playsinline aria-label="Quickly toggling emoji mode on and off" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/emoji-quick-toggle.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>When â€œâ˜‘ï¸ Unicode symbols and emoji predictionsâ€ is enabled, finding
matching candidates can be considerably slower compared to when emoji
mode is switched off. Especially if the emoji lookup is done in
multiple languages at the same time. In this case, there may be a
noticeable delay until the candidate list pops up.</p><p>Therefore, â€œâ˜ Unicode symbols and emoji predictionsâ€ is disabled by default
to show normal word predictions with maximum speed.</p><p>Always opening the setup tool to switch emoji mode on if one
occasionally wants to input an emoji would be inconvenient. Therefore,
emoji mode can also be toggled with a mouse binding (Control+Button3
anywhere in the candidate list toogles emoji mode between on and off)
or with a key binding (AltGr+F6 toggles emoji mode between on and
off).</p><p>But there is an even faster way to temporarily switch on emoji mode
just for the current lookup.</p><p>In the example video we can see that there is an option:</p><p>â€œEmoji trigger characters: [_: ]â€</p><p>By default, the value for this option contains only the underscore â€œ_â€,
for this video I have added a colon â€œ:â€.</p><p>Even if emoji mode is off (which can be seen in the options tab of the
setup tool also shown in the video) we get emoji matches by starting
or ending keywords with â€œ_â€ or â€œ:â€.</p><p>As can be seen in the video, â€œcamel_â€, â€œ:frogâ€, â€œ_Indiaâ€, â€œ:castleâ€,
â€œrocket:â€, â€œ:cat_heartâ€ match emoji even though â€œâ˜ Unicode symbols and
emoji predictionsâ€ is disabled</p><p>âš ï¸ <strong>Concatenating keywords</strong>: If you want to use several keywords like in
â€œ:cat_heartâ€ always use the underscore to concatenate the keywords
like â€œcatâ€ and â€œheartâ€. This is not changed by configuring the â€œEmoji
trigger charactersâ€.</p><p>Using these â€œEmoji trigger charactersâ€ at the beginning or end of the
search input temporarily turns on emoji search just for this one
lookup.</p><h2 id=emoji-picker>Emoji picker</h2><figure><img src=images/emoji-picker.png alt="Screenshot of Emoji Picker"><figcaption><p>Screenshot of Emoji Picker</p></figcaption></figure><video playsinline aria-label="Emoji picker" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/emoji-picker.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>ibus-typing-booster contains an â€œemoji-pickerâ€ tool which can be used
independently from ibus-typing-booster, i.e. even when
ibus-typing-booster is not running.</p><p>In Fedora, â€œemoji-pickerâ€ is packaged as sub-package of
ibus-typing-booster named â€œemoji-pickerâ€, so it might not be installed
but you can install it with:</p><p><code>$ sudo dnf install emoji-picker</code></p><p>From the command line â€œemoji-pickerâ€ can be started with and optional list
of languages:</p><p><code>$ emoji-picker -l en:ja:fr:it:hi:ko:zh &</code></p><p>(The <code>-l</code> option to specifying some languages is optional, see
explanation about the options below).</p><p>Clicking with the left mouse button on an emoji shown in
â€œemoji-pickerâ€ puts it into the clipboard and you can then paste it
somewhere using Control+V or the middle mouse button.</p><p>Clicking the right mouse button on an emoji shown in â€œemoji-pickerâ€
shows the emoji much bigger and some extra information about that
emoji, like the Unicode code point(s), the name and search keywords of
the emoji in all chosen languages, the fonts really used to render
this emoji, the Unicode version this emoji first appeared in, and a
link to lookup this emoji in emojipedia.</p><p>The fonts really used to render an emoji may differ from the font
chosen in the user interface of emoji picker because:</p><ul><li><p>The chosen font may have no glyph for a certain emoji. In that case,
if there is any other font installed on the system which has that
emoji, a fallback font will be used to render the emoji (Unless the
â€œâ˜‘ï¸ Fallbackâ€ option at the top of emoji-picker is switched
off!). The info popover shown on right mouse click will show which
font was really used, i.e. it enables one to see which font was used
as a fallback.</p></li><li><p>Some emoji are sequences of several code points and with some fonts
(or when there are bugs in the rendering system), it may not be
possible to render the sequence correctly and one may see individual
parts of the sequence rendered seperately, possibly even different
parts of the sequence in different fonts. The info popover shown on
right mouse click shows which font was used for which part of the
sequence which is helpful to debug such problems.</p></li></ul><p>Emoji can also be selected with different skin tones. If the mouse
hovers over an emoji for which different skin tones are available, a
tooltip says â€œLong press or middle click for skin tonesâ€. Long
pressing such an emoji with the left mouse button or clicking it with
the middle mouse button pops up a menu showing all the skin tone
variants. One can then click on any variant with the left mouse button
to put it into the clipboard and paste it elsewhere.</p><p>Which skin tone was last used is remembered, i.e. the emoji shown
before opening the menu for the skin tones is the emoji with the skin
tone variant used last for this emoji.</p><p>There is also a â€œğŸ•’ Recently usedâ€ section at the top left of â€œemoji-pickerâ€.</p><p>Clearing the recently used characters resets all emoji to neutral skin
tone by default.</p><p>â€œemoji-pickerâ€ also has a â€œSearchâ€ feature where you can type a search
string and get matching emoji listed.</p><p>The search string can be in any of the languages specified by the
environment variables or on the command line.</p><p>In the search results as well you can do the same things as when browsing
the emoji categories:</p><ul><li><p>Click on one of the matches to put it into the clipboard and paste it elsewhere.</p></li><li><p>Right click on one of the matches to show the emoji bigger with extra information</p></li><li><p>Long press left mouse button or click middle mouse button to show skin tones if available for that emoji.</p></li></ul><p>â€œemoji-pickerâ€ has some command line options to choose the languages,
the font and the fontsize. For example,</p><pre><code>$ emoji-picker --languages de:en:fr
</code></pre><p>would enable you to use German, English, and French to browse and
search for emoji and display the names of the emoji in all of these
languages. If the command line option is not used, the languages are
taken from the environment variables. The <code>LANGUAGE</code> variable works as
well. For example,</p><pre><code>LANGUAGE=de:en:fr emoji-picker
</code></pre><p>also chooses German, English, and French. And,</p><pre><code>LANG=de_DE.UTF-8 emoji-picker
</code></pre><p>would choose only German (English is always implicitly added as a
fallback though.)</p><p>The command line options to choose a different font or font size can
be used like this:</p><pre><code>emoji-picker --font &quot;Noto Color Emoji&quot; --fontsize 32
</code></pre><p>The command line font options override the font options in the
graphical user interface.</p><p>For more about emoji fonts and colour, see <a href=#emoji-fonts>Emoji fonts</a>.</p><h2 id=emoji-fonts>Emoji fonts</h2><p>Good fonts to display emoji:</p><ul><li><p>â€œNoto Color Emojiâ€:</p><ul><li><p>On Fedora 40, this font is in the <code>google-noto-emoji-fonts</code> package.
The version currently packaged is a bitmap font (OpenType CBDT table).
When the bitmaps are scaled up to huge sizes the results look blurry.</p></li><li><p>On openSUSE it is in the <code>noto-coloremoji-fonts</code> package.
The version currently packaged is a bitmap font (OpenType CBDT table).
When the bitmaps are scaled up to huge sizes the results look blurry.</p></li><li><p>If the version packaged for your distribution is not up-to-date,
you can get the most recent version here:
<a href=https://www.google.com/get/noto/>https://www.google.com/get/noto/</a>. (Search for â€œNoto Color
Emojiâ€).</p></li><li><p>You can also get this font from the github repo:
<a href=https://github.com/googlefonts/noto-emoji/tree/main/fonts>https://github.com/googlefonts/noto-emoji/tree/main/fonts</a>
There is also a Noto-COLRv1.ttf in that directory which
uses COLRv1 (it has a OpenType COLR table). COLR fonts
use scalable vector graphics and thus render nicely at any size.
COLRv1 also renders quite fast, faster than SVG apparently.</p></li></ul></li><li><p>â€œTwitter Color Emojiâ€:</p><ul><li><p>A color and B&W emoji SVG-OpenType / SVGinOT font (has the
OpenType SVG table) I tested that it works well on Fedora 40 and
Fedora 41. SVG is a scalable vector graphics format, therefore
this font renders nicely at any size. SVG seems to render
slower than COLRv1, but this font still renders quite fast.</p></li><li><p>Github: <a href=https://github.com/13rac1/twemoji-color-font>https://github.com/13rac1/twemoji-color-font</a></p></li><li><p>I am not aware of packages for Fedora or openSUSE but one can
easily download the tarball for the latest release from
<a href=https://github.com/13rac1/twemoji-color-font/releases/download/v15.1.0/TwitterColorEmoji-SVGinOT-Linux-15.1.0.tar.gz>https://github.com/13rac1/twemoji-color-font/releases/download/v15.1.0/TwitterColorEmoji-SVGinOT-Linux-15.1.0.tar.gz</a>
and unpack it in the ~/.fonts/ directory.</p></li></ul></li><li><p>â€œTwemojiâ€:</p><ul><li><p>Homepage: <a href=https://twemoji.twitter.com/>https://twemoji.twitter.com/</a> (doesnâ€™t exist anymore)</p></li><li><p>Github: <a href=https://github.com/twitter/twemoji/>https://github.com/twitter/twemoji/</a></p></li><li><p>On Fedora, this font is in the <code>twitter-twemoji-fonts</code> package.
It is a bitmap font (OpenType CBDT table).</p></li></ul></li><li><p>â€œOpenMojiâ€:</p><ul><li><p>Homepage: <a href=https://openmoji.org/>https://openmoji.org/</a></p></li><li><p>On Fedora 40, this font is in
the <code>hfg-gmuend-openmoji-color-fonts</code> package. The font in the
package is a COLRv1 font (OpenType COLR table), i.e. a vector
graphics font which scales nicely to any size. Other varieties
of this font can be found in the github repo:
<a href=https://github.com/hfg-gmuend/openmoji/tree/15.0.0/font>https://github.com/hfg-gmuend/openmoji/tree/15.0.0/font</a> There
are versions with CBDT (bitmap), COLRv0, COLRv1, SVG, SBIX, SVG
and COLRv0, SVG and COLRv1. The SVG rendering works for me on
Fedora 40 but is really slow. There is also a black and white
verson of this font in that github repo,
â€œOpenMoji-black-glyf.ttfâ€.</p></li></ul></li><li><p>â€œSymbolaâ€:</p><ul><li><p>Created by George Douros. The latest version (Version 13.00,
released March 25, 2020)is available here:
<a href=https://dn-works.com/ufas/>https://dn-works.com/ufas/</a></p></li><li><p>Distributions usually have packages old version of this font as
the recent versions have a licence which does not allow to include
it in distributions: â€œFree use of UFAS is strictly limited to
personal use.â€</p></li><li><p>â€œSymbolaâ€ is not really an emoji font, it is a black and white
font (not even grayscale) and it doesnâ€™t support emoji sequences,
i.e. emoji which consist of mor than one character. That means
emoji sequences like ğŸ‘· (ğŸ‘· U+1F477 CONSTRUCTION WORKER, U+200D
ZERO WIDTH JOINER, â™€ U+2640 FEMALE SIGN) will display as several
glyphs and not as a single glyph showing a female construction
worker. The same problem occurs for the flag sequences, the family
emoji and all other emoji sequences. And the skin tones modifiers
are shown as seperate characters following the emoji they are
modifying as well. Nevertheless â€œSymbolaâ€ is a phantastic font
and I absolutely recommend to download its latest version and
unpack the Symbola.zip file in your <code>~/.fonts/</code> directory. It has
very beautifully drawn symbols, for example mathematical symbols
which are just fine in black and white and which most other fonts
donâ€™t have.</p></li></ul></li></ul><p>The following video shows the above mentioned fonts used in â€œemoji-pickerâ€:</p><video playsinline aria-label="Emoji font selection in emoji-picker" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/emoji-font-selection-in-emoji-picker.mp4 type=video/mp4><p>Your browser does not support video.</p></video><h3 id=historic-emoji-colour><span style=color:red>Historic:</span> Showing emoji in colour</h3><p>Once upon a time it was not possible at all to display colourful emoji
using Linux. The best one could get using color emoji fonts like
â€œNoto Color Emojiâ€ were grayscale emojis which looked like this:</p><figure><img src=../../images/user-docs/gnome-noto-color-emoji-grayscale.png alt="How emoji looked like on Linux before colour became possible"><figcaption><p>How emoji looked like on Linux before colour became possible</p></figcaption></figure><p>Later one could use an experimental patch for Cairo which enabled
colour display of emojis.</p><p>On top of that Cairo patch one usually also had to fiddle with the
fontconfig font setup to give a good colour emoji font highest
priority, i.e. create a file <code>~/.config/fontconfig/fonts.conf</code> with
contents like <a href=../../other-files/fonts.conf>example fonts.conf</a> to give
the â€œNoto Color Emojiâ€ the highest priority.</p><p>Luckily these times are long gone and as far as I know all recent
Linux distributions display nice, colourful emoji by default now.</p><h1 id=gnome-osk>The Gnome on-screen keyboard, enabling and using it</h1><video playsinline aria-label="Enabling and using the Gnome on-screen keyboard" style=width:100%;height:auto controls>
<source src=../../videos/user-docs/enabling-and-using-the-gnome-on-screen-keyboard.mp4 type=video/mp4><p>Your browser does not support video.</p></video><p>This video shows how one can enable the Gnome on-screen keyboard and
use it with ibus-typing-booster.</p><p>To enable the Gnome on-screen keyboard, open the Gnome control center
and select the â€œAccessibilityâ€ tab. Scroll down to the â€œTypingâ€ section and
enable the slider â€œScreen Keyboardâ€.</p><p>If no other accessibility features had already been enabled before, the
accessibility icon now appears in the Gnome panel. Clicking on that
accessibility icon pops down a menu where you can see that the â€œScreen
Keyboardâ€ is now enabled.</p><p>Now focus on some input area, I use gedit in the video.</p><p>The on-screen keyboard should now always be visible when the focus is
on an input area.</p><p>If an ibus input method like ibus-typing-booster is enabled, this
input method is used when clicking the keys on the on-screen keyboard.</p><p>Without the on-screen keyboard, Typing Booster pops up lists of
candidates for completion <strong>or</strong> shows completions inline if the
option â€œâ˜‘ï¸Â Use inline completionâ€ is enabled.</p><p>When Typing Booster would pop up a candidate list during normal use
with a hardware keyboard, this list is shown instead above the keys
of the on-screen keyboard.</p><p><strong>But</strong> when â€œâ˜‘ï¸Â Use inline completionâ€ is enabled, Typing Booster
often shows the â€œbestâ€ completion inline and does <strong>not</strong> pop up a
candidate list. Nothing is displayed above the keys of the on-screen
keyboard in that case because the list of the other completion
candidates is still hidden. When using a hardware keyboard, one can
type <code>Tab</code> to request the list for the other candidates to be
shown. But the on-screen keyboard has no Tab key! Changing this to a
different key in the settings of Typing Booster does not help because
the on-screen keyboard has so few keys, there is no spare, unneeded
key one could use instead of <code>Tab</code> to request a candidate list. So
one should <strong>disable</strong> the option â€œâ˜ï¸Â Use inline completionâ€ if one
wants to use Typing Booster with the on-screen keyboard. Unfortunately
Typing Booster has no way to detect whether an on-screen keyboard is
visible or not so it cannot switch that option off automatically.</p><p>There are currently many other annoying problems and limitations when
using the on-screen keyboard with input methods:</p><ul><li><p>Completely broken when using Gnome on Wayland. See: <a href="https://bugzilla.redhat.com/show_bug.cgi?id=2015166">https://bugzilla.redhat.com/show_bug.cgi?id=2015166</a>.</p></li><li><p>As can be seen in the video, when a candidate is shown which has
more than one word, it is hard to see that it is a single
candidate. For example, in the video when <code>E</code> is typed, the
candidate list shows â€œEnglish text English E EB EC EMâ€. The first
candidate is actually â€œEnglish textâ€, i.e. it is a two word
candidate, but that is hard to see. It would be much better if the
candidates were rendered into some kind of boxes like those used for
the keys of the on-screen keyboard for example.
See: <a href="https://bugzilla.redhat.com/show_bug.cgi?id=2015978">https://bugzilla.redhat.com/show_bug.cgi?id=2015978</a></p></li><li><p>The space above the keys of the on-screen keyboard can only show a
small number of candidates. There may be a lot more candidates. But
these candidates cannot be accessed. In a â€œnormalâ€ candidate list
shown when using a hardware keyboard, one can scroll down to the
next page of candidates by either using the <code>Page_Down</code> key, click
on the arrow down button with the mouse or use the mouse wheel. But
none of this is possible with the on-screen keyboard, it has no
<code>Page_Down</code> key, the mouse wheel does nothing, and there are no
arrow-buttons to click to show the next page. I think the on-screen
keyboard should add buttons with left and right arrows to the left
and the right of the horizontal row of candidates to switch between
multiple pages of candidates. When using Typing Booster, one can
often avoid having to go to the next page of candidates by being
more specific and typing a few keys more so that the wanted
candidate finally appears in the first page. But with many input
methods, especially with Japanese input methods like ibus-anthy or
ibus-kkc, being able to go to the next page of candidates is
absolutely essential.
See: <a href="https://bugzilla.redhat.com/show_bug.cgi?id=2016001">https://bugzilla.redhat.com/show_bug.cgi?id=2016001</a></p></li><li><p>The candidate list does not disappear when it should. In a situation
when a candidate list disappears when using a hardware keyboard, it
should also disappear when using the on-screen keyboard. For
example, when a candidate is committed, the candidate list should
disappear. But on the on-screen keyboard the candidate list stays
even after a commit happened. See:
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=2015149">https://bugzilla.redhat.com/show_bug.cgi?id=2015149</a></p></li></ul><h1 id=nltk-related-words>Using NLTK to find related words</h1><figure><img src=../../images/user-docs/gnome-castle-word-related.png alt="Finding related words for â€œcastleâ€ with NLTK"><figcaption><p>Finding related words for â€œcastleâ€ with NLTK</p></figcaption></figure><p>ibus-typing-booster can also find words which are related to any of the candidates displayed. To show related words for a candidate, move up or down in the candidate list using the arrow-up/arrow-down keys or the page-up/page-down keys until the desired emoji is highlighted, then press AltGr+F12 (When AltGr+F12 is pressed before moving in the candidate list, i.e. when no candidate at all is highlighted in the candidate list, the word from the preÃ«dit is used to lookup related words). In the screen shot shown, â€œcastleâ€ was typed followed by AltGr+F12 and synonyms for â€œcastleâ€ are displayed. hypernyms or hyponyms may also be displayed.</p><p>Looking up related words like this currently only works for English. When trying to find related words for non-English words, nothing will happen.</p><p>The lookup of related words uses NLTK and will only work when NLTK for Python3 and the wordnet corpus for NLTK are installed. On Fedora, you can install it like this:</p><pre><code>sudo dnf install python3-nltk
python3
import nltk
nltk.download()
</code></pre><p>A download tool for NLTK data as seen in the next screen shot opens, select the wordnet corpus and click the â€œDownloadâ€ button:</p><figure><img src=../../images/user-docs/nltk-wordnet-corpus-download.png alt="Downloading the Wordnet corpus"><figcaption><p>Downloading the Wordnet corpus</p></figcaption></figure><h1 id=speech-recognition>Speech recognition</h1><p>ibus-typing-booster supports speech recognition using the <a href=https://cloud.google.com/speech-to-text/>Google Cloud Speech-to-Text</a> service which <a href=https://cloud.google.com/speech-to-text/docs/languages>supports 120 languages</a>.</p><p>This service is currently only free for up to 60 minutes per month, when using it for more than 60 minutes per month one has to pay a fee. The pricing is explained <a href=https://cloud.google.com/speech-to-text/pricing>here</a>.</p><p>To be able to use the Google Cloud Speech-to-Text service, one has to <a href=https://cloud.google.com/speech-to-text/docs/quickstart-client-libraries>setup a GCP Console project</a>.</p><p>The above link explains that one has to do the following things:</p><ul><li>Create or select a project.</li><li>Enable the Google Speech-to-Text API for that project.</li><li>Create a service account.</li><li>Download a private key as a .json file.</li></ul><p>The link explaining how to <a href=https://cloud.google.com/speech-to-text/docs/quickstart-client-libraries>setup a GCP Console project</a> also mentions that one has to <a href=https://cloud.google.com/sdk/docs/#linux>install and initialize the Google Cloud SDK</a>. Actually doing that seems to be optional, I tried doing the ibus-typing-booster speech recognition without installing the Google Cloud SDK and it seems to work just fine without.</p><p>And one has to <a href=https://cloud.google.com/speech-to-text/docs/quickstart-client-libraries#client-libraries-install-python>install the client library for Python3</a> . This link explains that you can install the client library with the command</p><p><code>pip install --upgrade google-cloud-speech</code></p><p>âš ï¸ <strong>Attention</strong>:
on most Linux distributions today, the above line will install the Python2 version of this client library. But ibus-typing-booster requires Python3, so you probably have to use</p><p><code>pip3 install --upgrade google-cloud-speech</code></p><p>to get the Python3 version of the client library (unless on your distribution <code>pip</code> already defaults to Python3 but that is rather unlikely at the moment). You can also add the <code>--user</code> option if you want to install this in the home directory of the user:</p><p><code>pip3 install --user --upgrade google-cloud-speech</code></p><p>And you need to install the Python3 module of pyaudio. How to do that depends on you Linux distribution. On Fedora 29 you can do it with:</p><p><code>sudo dnf install python3-pyaudio</code></p><p>Finally, after the Google setup and the software installation is done,
you can enable speech recognition in ibus-typing-booster.</p><p>One necessary thing to set up is setting a key binding for speech
recognition. By default that key binding is empty, the screen shot
shows how to set it to something:</p><figure><img src=../../images/user-docs/gnome-set-keybinding-for-speech-recognition.png alt="Set a key binding for speech recognition"><figcaption><p>Set a key binding for speech recognition</p></figcaption></figure><p>Another necessary thing to setup is to specify the location of the
â€œGoogle application credentialsâ€ .json file which you should have
downloaded above when <a href=https://cloud.google.com/speech-to-text/docs/quickstart-client-libraries>setting up a GCP Console
project</a>.</p><p>The screen shot shows that you can do that in the â€œSpeech recognitionâ€ tab of the setup tool of ibus-typing-booster:</p><figure><img src=../../images/user-docs/gnome-set-google-application-credentials-file.png alt="Set the â€œGoogle application credentialsâ€ .json file"><figcaption><p>Set the â€œGoogle application credentialsâ€ .json file</p></figcaption></figure><p>The language used for speech recognition is the language of the
dictionary with the highest priority in ibus-typing-booster.</p><p>You can see these dictionary priorities by opening the setup tool of
ibus-typing-booster and looking at the â€œDictionaries and input
methodsâ€ tab. The dictionary at the top of the list has the highest
priority and the language of this dictionary is used for Google
Speech-to-Text.</p><p>Here you can also see for which languages speech recognition is
officially supported. The official list of languages supported by
Google Cloud Speech-to-Text is
<a href=https://cloud.google.com/speech-to-text/docs/languages>here</a>. In the
ibus-typing-booster setup tool â€œDictionaries and input methodsâ€ tab, a
row for a language officially supported by Google Speech-to-Text is
marked with â€œSpeech recognition âœ”ï¸â€, a row for a language not
officially supported by Google Speech-to-Text is marked with â€œSpeech
recognition âŒâ€.</p><p>In Googles official list, only â€œde_DEâ€ is supported among the German
variants. Therefore, one can see in the screen shot that â€œde_CHâ€ is
marked with â€œSpeech recognition âŒâ€:</p><figure><img src=../../images/user-docs/gnome-choose-language-for-speech-recognition.png alt="Choose the langauge for speech recognition"><figcaption><p>Choose the langauge for speech recognition</p></figcaption></figure><p>But, when I tried it, I found that â€œdeâ€, â€œde-DEâ€, â€œde-ATâ€, â€œde-CHâ€,
â€œde-BEâ€, â€œde-LUâ€ all seem to work the same and seem to recognize
standard German. When using â€œde-CHâ€, it uses â€œÃŸâ€ when spelling German
words even though â€œssâ€ is used in Switzerland instead of â€œÃŸâ€. There
seems to be no difference between using Google Speech-to-Text for all
these variants of German.</p><p>However, for â€œen-GBâ€ and â€œen-USâ€, there is a difference, the produced
text uses British or American spelling depending on which one of these
English variants is used.</p><p>I donâ€™t want to disallow using something like â€œde-CHâ€ for speech
recognition just because it is not on the list of officially supported
languages. Therefore, I allow all languages to be used for speech
recognition. But when a language is not officially supported, I mark
it with â€œSpeech recognition âŒâ€ and you can try whether it works well
or not.</p><p>When trying to use a language which is really not supported by Google
Speech-to-Text, for example â€œgsw_CHâ€ (Alemannic German in
Switzerland), it seems to fall back to American English, i.e. it
behaves as if speech recognition for â€œen_USâ€ were used.</p><p>To switch to a different language for speech recognition you donâ€™t
always have to open the setup tool, you can also use key bindings to
change the highest priority dictionary, see the commands
â€œnext_dictionaryâ€ and â€œprevious_dictionaryâ€ in the key bindings tab of
the setup tool.</p><p>And you can also change the highest priority dictionary by using the
Gnome panel (or the panel of your favourite desktop) or the ibus
floating panel on non-Gnome desktops.</p><p>To input using speech recognition, press the key which is bound to the
command â€œspeech_recognitionâ€. A popup appears near the writing
position showing something like â€œğŸ™en_GBâ€¯ğŸ‡¬ğŸ‡§: â€. Now speak something and
what Google Speech-to-Text recognizes appears in that popup which then
may look like â€œğŸ™en_GBâ€¯ğŸ‡¬ğŸ‡§: This is the text I have spokenâ€. When a
pause is detected in the voice recording, the speech recognition is
finalized and the result is inserted at the writing position.</p><footer class=site-footer><span class=site-footer-credits>Made with <a href=https://gohugo.io/>Hugo</a>. Themed by <a href=https://github.com/zwbetz-gh/cayman-hugo-theme>Cayman</a>.</span></footer></section></body></html>